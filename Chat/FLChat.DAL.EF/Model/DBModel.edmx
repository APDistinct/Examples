<?xml version="1.0" encoding="utf-8"?>
<edmx:Edmx Version="3.0" xmlns:edmx="http://schemas.microsoft.com/ado/2009/11/edmx">
  <!-- EF Runtime content -->
  <edmx:Runtime>
    <!-- SSDL content -->
    <edmx:StorageModels>
    <Schema Namespace="Model.Store" Provider="System.Data.SqlClient" ProviderManifestToken="2012" Alias="Self" xmlns:store="http://schemas.microsoft.com/ado/2007/12/edm/EntityStoreSchemaGenerator" xmlns:customannotation="http://schemas.microsoft.com/ado/2013/11/edm/customannotation" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl">
        <EntityType Name="AuthToken">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="Token" Type="varchar" MaxLength="255" Nullable="false" />
          <Property Name="IssueDate" Type="datetime" Nullable="false" />
          <Property Name="ExpireBy" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="SmsCode">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="Code" Type="int" Nullable="false" />
          <Property Name="IssueDate" Type="datetime" Nullable="false" />
          <Property Name="ExpireBySec" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="EventType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" Nullable="false" />
          <Property Name="Name" Type="varchar" MaxLength="50" Nullable="false" />
        </EntityType>
        <EntityType Name="ExternalTransportButton">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="Caption" Type="nvarchar" MaxLength="100" Nullable="false" />
          <Property Name="Command" Type="nvarchar" MaxLength="255" Nullable="false" />
          <Property Name="Row" Type="int" Nullable="false" />
          <Property Name="Col" Type="int" Nullable="false" />
          <Property Name="HideForTemporary" Type="bit" Nullable="false" />
        </EntityType>
        <EntityType Name="MediaType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Name" Type="varchar" MaxLength="500" Nullable="false" />
          <Property Name="CanBeAvatar" Type="bit" Nullable="false" />
          <Property Name="MediaTypeGroupId" Type="int" Nullable="false" />
          <Property Name="Enabled" Type="bit" Nullable="false" />
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
        </EntityType>
        <EntityType Name="MediaTypeGroup">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="50" Nullable="false" />
          <Property Name="MaxLength" Type="int" />
        </EntityType>
        <EntityType Name="MessageType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="50" Nullable="false" />
          <Property Name="ShowInHistory" Type="bit" Nullable="false" />
          <Property Name="LimitForDay" Type="int" />
          <Property Name="LimitForOnce" Type="int" />
        </EntityType>
        <EntityType Name="Scenario">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="50" Nullable="false" />
          <Property Name="Comment" Type="nvarchar" MaxLength="200" />
        </EntityType>
        <EntityType Name="ScenarioStep">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="ScenarioId" Type="int" Nullable="false" />
          <Property Name="Step" Type="int" Nullable="false" />
          <Property Name="Description" Type="nvarchar" MaxLength="200" />
        </EntityType>
        <EntityType Name="Settings">
          <Key>
            <PropertyRef Name="Name" />
          </Key>
          <Property Name="Name" Type="nvarchar" MaxLength="100" Nullable="false" />
          <Property Name="Value" Type="nvarchar(max)" />
          <Property Name="Descr" Type="nvarchar" MaxLength="500" />
        </EntityType>
        <EntityType Name="TransportType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" Nullable="false" />
          <Property Name="Name" Type="varchar" MaxLength="50" Nullable="false" />
          <Property Name="Enabled" Type="bit" Nullable="false" />
          <Property Name="VisibleForUser" Type="bit" Nullable="false" />
          <Property Name="CanSelectAsDefault" Type="bit" Nullable="false" />
          <Property Name="Prior" Type="tinyint" Nullable="false" />
          <Property Name="DeepLink" Type="nvarchar" MaxLength="255" />
          <Property Name="InnerTransport" Type="bit" Nullable="false" />
          <Property Name="SendGreetingMessage" Type="bit" Nullable="false" />
        </EntityType>
        <EntityType Name="City">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="RegionId" Type="int" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="250" />
        </EntityType>
        <EntityType Name="Country">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="250" Nullable="false" />
        </EntityType>
        <EntityType Name="Rank">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="250" Nullable="false" />
        </EntityType>
        <EntityType Name="Region">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="int" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="CountryId" Type="int" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="250" Nullable="false" />
        </EntityType>
        <EntityType Name="FileInfo">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="uniqueidentifier" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Idx" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="FileOwnerId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="LoadDate" Type="datetime" Nullable="false" StoreGeneratedPattern="Computed" />
          <Property Name="FileName" Type="nvarchar" MaxLength="4000" />
          <Property Name="MediaTypeId" Type="int" Nullable="false" />
          <Property Name="FileLength" Type="int" Nullable="false" />
          <Property Name="Width" Type="int" />
          <Property Name="Height" Type="int" />
        </EntityType>
        <EntityType Name="Event">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="Tm" Type="datetime" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="EventTypeId" Type="int" Nullable="false" />
          <Property Name="CausedByUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="MsgId" Type="uniqueidentifier" />
          <Property Name="CausedByUserTransportTypeId" Type="int" />
        </EntityType>
        <EntityType Name="EventAddressee">
          <Key>
            <PropertyRef Name="Id" />
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="Id" Type="bigint" Nullable="false" />
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="EventDelivered">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="LastEventId" Type="bigint" Nullable="false" />
        </EntityType>
        <EntityType Name="Message">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="uniqueidentifier" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Idx" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="PostTm" Type="datetime" Nullable="false" StoreGeneratedPattern="Computed" />
          <Property Name="MessageTypeId" Type="int" Nullable="false" />
          <Property Name="FromUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="FromTransportTypeId" Type="int" Nullable="false" />
          <Property Name="AnswerToId" Type="uniqueidentifier" />
          <Property Name="Text" Type="nvarchar" MaxLength="4000" />
          <Property Name="IsDeleted" Type="bit" Nullable="false" />
          <Property Name="Specific" Type="nvarchar" MaxLength="500" />
          <Property Name="ForwardMsgId" Type="uniqueidentifier" />
          <Property Name="FileId" Type="uniqueidentifier" />
          <Property Name="NeedToChangeText" Type="bit" Nullable="false" />
          <Property Name="DelayedStart" Type="datetime" />
          <Property Name="DalayedCancelled" Type="datetime" />
          <Property Name="ScenarioStepId" Type="int" />
        </EntityType>
        <EntityType Name="MessageError">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="InsertedDate" Type="datetime" Nullable="false" StoreGeneratedPattern="Computed" />
          <Property Name="MsgId" Type="uniqueidentifier" />
          <Property Name="ToUserId" Type="uniqueidentifier" />
          <Property Name="ToTransportTypeId" Type="int" />
          <Property Name="Type" Type="nvarchar" MaxLength="255" />
          <Property Name="Descr" Type="nvarchar" MaxLength="4000" />
          <Property Name="Trace" Type="nvarchar(max)" />
        </EntityType>
        <EntityType Name="MessageToSegment">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="SegmentId" />
          </Key>
          <Property Name="Idx" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="SegmentId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="MaxDeep" Type="int" />
        </EntityType>
        <EntityType Name="MessageToSelection">
          <Key>
            <PropertyRef Name="Idx" />
          </Key>
          <Property Name="Idx" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="WithStructure" Type="bit" Nullable="false" />
          <Property Name="Include" Type="bit" Nullable="false" />
          <Property Name="StructureDeep" Type="int" />
        </EntityType>
        <EntityType Name="MessageToUser">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="ToUserId" />
            <PropertyRef Name="ToTransportTypeId" />
          </Key>
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ToUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ToTransportTypeId" Type="int" Nullable="false" />
          <Property Name="Idx" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="IsFailed" Type="bit" Nullable="false" />
          <Property Name="IsSent" Type="bit" Nullable="false" />
          <Property Name="IsDelivered" Type="bit" Nullable="false" />
          <Property Name="IsRead" Type="bit" Nullable="false" />
          <Property Name="IsWebChatGreeting" Type="bit" Nullable="false" />
        </EntityType>
        <EntityType Name="MessageTransportId">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="InsertedDate" Type="datetime" Nullable="false" StoreGeneratedPattern="Computed" />
          <Property Name="TransportId" Type="nvarchar" MaxLength="255" Nullable="false" />
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ToUserId" Type="uniqueidentifier" />
          <Property Name="TransportTypeId" Type="int" Nullable="false" />
          <Property Name="Index" Type="tinyint" Nullable="false" />
          <Property Name="Count" Type="tinyint" Nullable="false" />
        </EntityType>
        <EntityType Name="WebChatAccepted">
          <Key>
            <PropertyRef Name="WebChatId" />
            <PropertyRef Name="TransportTypeId" />
          </Key>
          <Property Name="WebChatId" Type="bigint" Nullable="false" />
          <Property Name="TransportTypeId" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="WebChatDeepLink">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ToUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ToTransportTypeId" Type="int" Nullable="false" />
          <Property Name="Link" Type="nvarchar" MaxLength="100" Nullable="false" />
          <Property Name="ExpireDate" Type="datetime" Nullable="false" />
          <Property Name="SentTo" Type="int" />
          <Property Name="ViberStatus" Type="int" />
          <Property Name="SmsStatus" Type="int" />
          <Property Name="UpdatedTime" Type="datetime" />
          <Property Name="WebFormRequested" Type="bit" Nullable="false" />
          <Property Name="IsFinished" Type="bit" Nullable="false" />
        </EntityType>
        <EntityType Name="StructureNode">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="uniqueidentifier" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Name" Type="nvarchar" MaxLength="255" Nullable="false" />
          <Property Name="ParentNodeId" Type="uniqueidentifier" />
          <Property Name="IsShowSegments" Type="bit" Nullable="false" />
          <Property Name="IsShowParentUsers" Type="bit" Nullable="false" />
          <Property Name="Order" Type="smallint" Nullable="false" />
        </EntityType>
        <EntityType Name="StructureNodeSegment">
          <Key>
            <PropertyRef Name="NodeId" />
            <PropertyRef Name="SegmentId" />
          </Key>
          <Property Name="NodeId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="SegmentId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="Order" Type="smallint" Nullable="false" />
          <Property Name="IsBelongToNode" Type="bit" Nullable="false" />
        </EntityType>
        <EntityType Name="BroadcastProhibition">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="ProhibitionUserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ProhibitionUserId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="Comment">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="UponUserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="UponUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="Text" Type="nvarchar" MaxLength="4000" Nullable="false" />
        </EntityType>
        <EntityType Name="Contact">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="ContactId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ContactId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="Group">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="uniqueidentifier" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="IsDeleted" Type="bit" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="255" />
          <Property Name="CreatedByUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="CreatedDate" Type="datetime" Nullable="false" StoreGeneratedPattern="Computed" />
          <Property Name="IsEqual" Type="bit" Nullable="false" />
          <Property Name="DeletedDate" Type="datetime" />
        </EntityType>
        <EntityType Name="GroupMember">
          <Key>
            <PropertyRef Name="GroupId" />
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="GroupId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="IsAdmin" Type="bit" Nullable="false" />
        </EntityType>
        <EntityType Name="MatchedPhones">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="AddrUserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="AddrUserId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="MsgAddressee">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="TransportTypeId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="TransportTypeId" Type="int" Nullable="false" />
          <Property Name="AddrUserId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="PersonalProhibition">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="ProhibitionUserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ProhibitionUserId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="ScenarioProcess">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="TransportTypeId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="TransportTypeId" Type="int" Nullable="false" />
          <Property Name="ScenarioStepId" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="Segment">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="uniqueidentifier" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="IsDeleted" Type="bit" Nullable="false" />
          <Property Name="Name" Type="nvarchar" MaxLength="255" Nullable="false" />
          <Property Name="Descr" Type="nvarchar" MaxLength="255" Nullable="false" />
          <Property Name="ShowInShortProfile" Type="bit" Nullable="false" />
          <Property Name="Tag" Type="nvarchar" MaxLength="250" />
          <Property Name="PartnerName" Type="nvarchar" MaxLength="100" />
        </EntityType>
        <EntityType Name="SegmentMember">
          <Key>
            <PropertyRef Name="SegmentId" />
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="SegmentId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="Transport">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="TransportTypeId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="TransportTypeId" Type="int" Nullable="false" />
          <Property Name="TransportOuterId" Type="nvarchar" MaxLength="255" />
          <Property Name="Enabled" Type="bit" Nullable="false" />
        </EntityType>
        <EntityType Name="User">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="uniqueidentifier" Nullable="false" StoreGeneratedPattern="Identity" />
          <Property Name="Enabled" Type="bit" Nullable="false" />
          <Property Name="FullName" Type="nvarchar" MaxLength="255" />
          <Property Name="IsConsultant" Type="bit" Nullable="false" />
          <Property Name="RegistrationDate" Type="date" />
          <Property Name="InsertDate" Type="datetime" Nullable="false" StoreGeneratedPattern="Computed" />
          <Property Name="SignUpDate" Type="datetime" />
          <Property Name="Phone" Type="varchar" MaxLength="20" />
          <Property Name="Email" Type="nvarchar" MaxLength="255" />
          <Property Name="Login" Type="varchar" MaxLength="255" />
          <Property Name="PswHash" Type="varchar" MaxLength="255" />
          <Property Name="OwnerUserId" Type="uniqueidentifier" />
          <Property Name="DefaultTransportTypeId" Type="int" />
          <Property Name="AvatarUploadDate" Type="datetime" />
          <Property Name="IsTemporary" Type="bit" Nullable="false" />
          <Property Name="IsBot" Type="bit" Nullable="false" />
          <Property Name="LoBonusScores" Type="decimal" Precision="12" Scale="2" />
          <Property Name="OlgBonusScores" Type="decimal" Precision="12" Scale="2" />
          <Property Name="GoBonusScores" Type="decimal" Precision="12" Scale="2" />
          <Property Name="RankId" Type="int" />
          <Property Name="LastGetEvents" Type="datetime" />
          <Property Name="FLUserNumber" Type="int" />
          <Property Name="ParentFLUserNumber" Type="int" />
          <Property Name="Birthday" Type="date" />
          <Property Name="ZipCode" Type="nvarchar" MaxLength="20" />
          <Property Name="CityId" Type="int" />
          <Property Name="EmailPermission" Type="bit" Nullable="false" />
          <Property Name="SmsPermission" Type="bit" Nullable="false" />
          <Property Name="IsDirector" Type="bit" Nullable="false" />
          <Property Name="LastOrderDate" Type="date" />
          <Property Name="PeriodsWolo" Type="int" />
          <Property Name="CashBackBalance" Type="decimal" Precision="12" Scale="2" />
          <Property Name="FLClubPoints" Type="decimal" Precision="12" Scale="2" />
          <Property Name="FLClubPointsBurn" Type="decimal" Precision="12" Scale="2" />
          <Property Name="DontDisableOnUpdateStructure" Type="bit" Nullable="false" />
          <Property Name="IsUseDeepChilds" Type="bit" Nullable="false" />
          <Property Name="LastImportDate" Type="datetime" />
          <Property Name="ForeignId" Type="nvarchar" MaxLength="100" />
          <Property Name="ForeignOwnerId" Type="nvarchar" MaxLength="100" />
        </EntityType>
        <EntityType Name="UserAvatar">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="Data" Type="varbinary(max)" Nullable="false" />
          <Property Name="MediaTypeId" Type="int" Nullable="false" />
          <Property Name="Width" Type="int" Nullable="false" />
          <Property Name="Height" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="UserData">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="KeyId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="KeyId" Type="bigint" Nullable="false" />
          <Property Name="Data" Type="nvarchar(max)" Nullable="false" />
        </EntityType>
        <EntityType Name="UserDataKey">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="bigint" StoreGeneratedPattern="Identity" Nullable="false" />
          <Property Name="Key" Type="nvarchar" MaxLength="255" Nullable="false" />
        </EntityType>
        <EntityType Name="UserSentry">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
        </EntityType>
        <EntityType Name="LastMessageView">
          <Key>
            <PropertyRef Name="UserId" />
            
            
            
            
            
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="UserOppId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="MsgIdx" Type="bigint" Nullable="false" />
          <Property Name="ToTransportTypeId" Type="int" Nullable="false" />
          <Property Name="Income" Type="bit" />
          <Property Name="MsgToUserIdx" Type="bigint" Nullable="false" />
          <Property Name="UnreadCnt" Type="int" />
        </EntityType>
        <EntityType Name="MessageCountOverToday">
          <Key>
            <PropertyRef Name="MessageTypeId" />
            <PropertyRef Name="FromUserId" />
          </Key>
          <Property Name="MessageTypeId" Type="int" Nullable="false" />
          <Property Name="FromUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="Count" Type="int" />
        </EntityType>
        <EntityType Name="MessageStatsGroupedView">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="MsgIdx" />
            <PropertyRef Name="MessageTypeId" />
            <PropertyRef Name="FromUserId" />
          </Key>
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="MsgIdx" Type="bigint" Nullable="false" />
          <Property Name="MessageTypeId" Type="int" Nullable="false" />
          <Property Name="FromUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="RecipientCount" Type="int" />
          <Property Name="WebChatCount" Type="int" />
          <Property Name="FailedCount" Type="int" />
          <Property Name="SentCount" Type="int" />
          <Property Name="QuequedCount" Type="int" />
          <Property Name="CantSendToWebChatCount" Type="int" />
          <Property Name="WebChatAcceptedCount" Type="int" />
          <Property Name="SmsUrlOpenedCount" Type="int" />
        </EntityType>
        <EntityType Name="MessageStatsRowsView">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="MsgIdx" />
            <PropertyRef Name="MessageTypeId" />
            <PropertyRef Name="FromUserId" />
            <PropertyRef Name="IsWebChat" />
            <PropertyRef Name="IsFailed" />
            <PropertyRef Name="IsSent" />
            <PropertyRef Name="IsQuequed" />
            <PropertyRef Name="CantSendToWebChat" />
            <PropertyRef Name="IsWebChatAccepted" />
            <PropertyRef Name="IsSmsUrlOpened" />
          </Key>
          <Property Name="MsgId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="MsgIdx" Type="bigint" Nullable="false" />
          <Property Name="MessageTypeId" Type="int" Nullable="false" />
          <Property Name="FromUserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="ToUserId" Type="uniqueidentifier" />
          <Property Name="ToTransportTypeId" Type="int" />
          <Property Name="IsWebChat" Type="int" Nullable="false" />
          <Property Name="IsFailed" Type="int" Nullable="false" />
          <Property Name="IsSent" Type="int" Nullable="false" />
          <Property Name="IsQuequed" Type="int" Nullable="false" />
          <Property Name="CantSendToWebChat" Type="int" Nullable="false" />
          <Property Name="IsWebChatAccepted" Type="int" Nullable="false" />
          <Property Name="IsSmsUrlOpened" Type="int" Nullable="false" />
        </EntityType>
        <EntityType Name="UserDefaultTransportView">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="DefaultTransportTypeId" Type="int" />
        </EntityType>
        <EntityType Name="UserMailingTransportView">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="DefaultTransportTypeId" />
          </Key>
          <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
          <Property Name="DefaultTransportTypeId" Type="int" Nullable="false" />
        </EntityType>
        <Association Name="FK__AuthSmsCode__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="SmsCode" Type="Self.SmsCode" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="SmsCode">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__AuthToken__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="AuthToken" Type="Self.AuthToken" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="AuthToken">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__CfgScenarioStep__CfgScenario">
          <End Role="Scenario" Type="Self.Scenario" Multiplicity="1" />
          <End Role="ScenarioStep" Type="Self.ScenarioStep" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Scenario">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioStep">
              <PropertyRef Name="ScenarioId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__DirCity__DirRegion">
          <End Role="Region" Type="Self.Region" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="City" Type="Self.City" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Region">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="City">
              <PropertyRef Name="RegionId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__DirRegion__DirCountry">
          <End Role="Country" Type="Self.Country" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="Region" Type="Self.Region" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Country">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Region">
              <PropertyRef Name="CountryId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__FileFile__CfgMediaType">
          <End Role="MediaType" Type="Self.MediaType" Multiplicity="1" />
          <End Role="FileInfo" Type="Self.FileInfo" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MediaType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="FileInfo">
              <PropertyRef Name="MediaTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__FileFile__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="FileInfo" Type="Self.FileInfo" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="FileInfo">
              <PropertyRef Name="FileOwnerId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MediaTypeId__MediaTypeGroupId">
          <End Role="MediaTypeGroup" Type="Self.MediaTypeGroup" Multiplicity="1" />
          <End Role="MediaType" Type="Self.MediaType" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MediaTypeGroup">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MediaType">
              <PropertyRef Name="MediaTypeGroupId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEvent__CfgEventType">
          <End Role="EventType" Type="Self.EventType" Multiplicity="1" />
          <End Role="Event" Type="Self.Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="EventType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="EventTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEvent__MsgMessage">
          <End Role="Message" Type="Self.Message" Multiplicity="0..1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="Event" Type="Self.Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEvent__UsrTransport">
          <End Role="Transport" Type="Self.Transport" Multiplicity="0..1" />
          <End Role="Event" Type="Self.Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="CausedByUserId" />
              <PropertyRef Name="CausedByUserTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEvent__UsrUserCaused">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="Event" Type="Self.Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="CausedByUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEventAddressee__MsgEvent">
          <End Role="Event" Type="Self.Event" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="EventAddressee" Type="Self.EventAddressee" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Event">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="EventAddressee">
              <PropertyRef Name="Id" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEventAddressee__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="EventAddressee" Type="Self.EventAddressee" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="EventAddressee">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEventDelivered__MsgEvent">
          <End Role="Event" Type="Self.Event" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="EventDelivered" Type="Self.EventDelivered" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Event">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="EventDelivered">
              <PropertyRef Name="LastEventId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEventDelivered__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="EventDelivered" Type="Self.EventDelivered" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="EventDelivered">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMesage__FileInfoFile">
          <End Role="FileInfo" Type="Self.FileInfo" Multiplicity="0..1" />
          <End Role="Message" Type="Self.Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="FileInfo">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="FileId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__AnswerMessage">
          <End Role="Message" Type="Self.Message" Multiplicity="0..1" />
          <End Role="Message1" Type="Self.Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message1">
              <PropertyRef Name="AnswerToId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__CfgMessageType">
          <End Role="MessageType" Type="Self.MessageType" Multiplicity="1" />
          <End Role="Message" Type="Self.Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="MessageTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__CfgScenarioStep">
          <End Role="ScenarioStep" Type="Self.ScenarioStep" Multiplicity="0..1" />
          <End Role="Message" Type="Self.Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="ScenarioStep">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="ScenarioStepId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__ForwardMsgId">
          <End Role="Message" Type="Self.Message" Multiplicity="0..1" />
          <End Role="Message1" Type="Self.Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message1">
              <PropertyRef Name="ForwardMsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__FromTransport">
          <End Role="Transport" Type="Self.Transport" Multiplicity="1" />
          <End Role="Message" Type="Self.Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="FromUserId" />
              <PropertyRef Name="FromTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageError__MsgMessage">
          <End Role="Message" Type="Self.Message" Multiplicity="0..1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MessageError" Type="Self.MessageError" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageError">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageError__MsgMessageToUser">
          <End Role="MessageToUser" Type="Self.MessageToUser" Multiplicity="0..1" />
          <End Role="MessageError" Type="Self.MessageError" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageToUser">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Principal>
            <Dependent Role="MessageError">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToSegment__MsgMessage">
          <End Role="Message" Type="Self.Message" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MessageToSegment" Type="Self.MessageToSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSegment">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToSegment__UsrSegment">
          <End Role="Segment" Type="Self.Segment" Multiplicity="1" />
          <End Role="MessageToSegment" Type="Self.MessageToSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Segment">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSegment">
              <PropertyRef Name="SegmentId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToSelection__MsgMessage">
          <End Role="Message" Type="Self.Message" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MessageToSelection" Type="Self.MessageToSelection" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSelection">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToSelection__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MessageToSelection" Type="Self.MessageToSelection" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSelection">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToUser__MsgMessage">
          <End Role="Message" Type="Self.Message" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MessageToUser" Type="Self.MessageToUser" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToUser">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToUser__UsrTransport">
          <End Role="Transport" Type="Self.Transport" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MessageToUser" Type="Self.MessageToUser" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="MessageToUser">
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageTransportId__MsgMessage">
          <End Role="Message" Type="Self.Message" Multiplicity="1" />
          <End Role="MessageTransportId" Type="Self.MessageTransportId" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageTransportId">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageTransportId__MsgMessageToUser">
          <End Role="MessageToUser" Type="Self.MessageToUser" Multiplicity="0..1" />
          <End Role="MessageTransportId" Type="Self.MessageTransportId" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageToUser">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Principal>
            <Dependent Role="MessageTransportId">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgWebChatAccepted__CfgTransportTypeId">
          <End Role="TransportType" Type="Self.TransportType" Multiplicity="1" />
          <End Role="WebChatAccepted" Type="Self.WebChatAccepted" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="WebChatAccepted">
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgWebChatAccepted__MsgWebChatDeepLink">
          <End Role="WebChatDeepLink" Type="Self.WebChatDeepLink" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="WebChatAccepted" Type="Self.WebChatAccepted" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="WebChatDeepLink">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="WebChatAccepted">
              <PropertyRef Name="WebChatId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgWebChatDeepLink__CfgTransportType">
          <End Role="TransportType" Type="Self.TransportType" Multiplicity="0..1" />
          <End Role="WebChatDeepLink" Type="Self.WebChatDeepLink" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="WebChatDeepLink">
              <PropertyRef Name="SentTo" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgWebChatDeepLink__MsgMessageToUser">
          <End Role="MessageToUser" Type="Self.MessageToUser" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="WebChatDeepLink" Type="Self.WebChatDeepLink" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageToUser">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Principal>
            <Dependent Role="WebChatDeepLink">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UiStructureNode__UiStructureNode">
          <End Role="StructureNode" Type="Self.StructureNode" Multiplicity="0..1" />
          <End Role="StructureNode1" Type="Self.StructureNode" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="StructureNode">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="StructureNode1">
              <PropertyRef Name="ParentNodeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UiStructureNodeSegment__UiStructureNode">
          <End Role="StructureNode" Type="Self.StructureNode" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="StructureNodeSegment" Type="Self.StructureNodeSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="StructureNode">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="StructureNodeSegment">
              <PropertyRef Name="NodeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UiStructureNodeSegment__UsrSegment">
          <End Role="Segment" Type="Self.Segment" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="StructureNodeSegment" Type="Self.StructureNodeSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Segment">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="StructureNodeSegment">
              <PropertyRef Name="SegmentId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UserAvatar__MediaType_Id">
          <End Role="MediaType" Type="Self.MediaType" Multiplicity="1" />
          <End Role="UserAvatar" Type="Self.UserAvatar" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MediaType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserAvatar">
              <PropertyRef Name="MediaTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrBroadcastProhibition__ProhibitionUserId">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="BroadcastProhibition" Type="Self.BroadcastProhibition" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="BroadcastProhibition">
              <PropertyRef Name="ProhibitionUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrBroadcastProhibition__UserId">
          <End Role="User" Type="Self.User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="BroadcastProhibition" Type="Self.BroadcastProhibition" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="BroadcastProhibition">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrComment__UsrUser_1">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="Comment" Type="Self.Comment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Comment">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrComment__UsrUser_2">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="Comment" Type="Self.Comment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Comment">
              <PropertyRef Name="UponUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrContact__UsrUser1">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="Contact" Type="Self.Contact" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Contact">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrContact__UsrUser2">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="Contact" Type="Self.Contact" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Contact">
              <PropertyRef Name="ContactId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrGroup__UsrUserOwned">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="Group" Type="Self.Group" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Group">
              <PropertyRef Name="CreatedByUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrGroupList__UsrGroup">
          <End Role="Group" Type="Self.Group" Multiplicity="1" />
          <End Role="GroupMember" Type="Self.GroupMember" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Group">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="GroupMember">
              <PropertyRef Name="GroupId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrGroupList__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="GroupMember" Type="Self.GroupMember" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="GroupMember">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrMatchedPhones__AddrUserId">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="MatchedPhones" Type="Self.MatchedPhones" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MatchedPhones">
              <PropertyRef Name="AddrUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrMatchedPhones__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MatchedPhones" Type="Self.MatchedPhones" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MatchedPhones">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrMsgAddressee__UsrTransport">
          <End Role="Transport" Type="Self.Transport" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="MsgAddressee" Type="Self.MsgAddressee" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="MsgAddressee">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrPersonalProhibition__ProhibitionUserId">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="PersonalProhibition" Type="Self.PersonalProhibition" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="PersonalProhibition">
              <PropertyRef Name="ProhibitionUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrPersonalProhibition__UserId">
          <End Role="User" Type="Self.User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="PersonalProhibition" Type="Self.PersonalProhibition" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="PersonalProhibition">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrScenarioProcess__CfgScenarioStep">
          <End Role="ScenarioStep" Type="Self.ScenarioStep" Multiplicity="1" />
          <End Role="ScenarioProcess" Type="Self.ScenarioProcess" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="ScenarioStep">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioProcess">
              <PropertyRef Name="ScenarioStepId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrScenarioProcess__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="ScenarioProcess" Type="Self.ScenarioProcess" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioProcess">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrSegmentMember__UsrSegment">
          <End Role="Segment" Type="Self.Segment" Multiplicity="1" />
          <End Role="SegmentMember" Type="Self.SegmentMember" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Segment">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="SegmentMember">
              <PropertyRef Name="SegmentId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrSegmentMember__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="SegmentMember" Type="Self.SegmentMember" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="SegmentMember">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrTransport__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="Transport" Type="Self.Transport" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Transport">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUser__DirCity">
          <End Role="City" Type="Self.City" Multiplicity="0..1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="User" Type="Self.User" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="City">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="User">
              <PropertyRef Name="CityId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUser__DirRank">
          <End Role="Rank" Type="Self.Rank" Multiplicity="0..1" />
          <End Role="User" Type="Self.User" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Rank">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="User">
              <PropertyRef Name="RankId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUser__UsrTransport">
          <End Role="Transport" Type="Self.Transport" Multiplicity="0..1" />
          <End Role="User" Type="Self.User" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="User">
              <PropertyRef Name="Id" />
              <PropertyRef Name="DefaultTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUser__UsrUserOwned">
          <End Role="User" Type="Self.User" Multiplicity="0..1" />
          <End Role="User1" Type="Self.User" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="User1">
              <PropertyRef Name="OwnerUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUserAvatar__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="UserAvatar" Type="Self.UserAvatar" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserAvatar">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUserData__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="UserData" Type="Self.UserData" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserData">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUserData__UsrUserDataKey">
          <End Role="UserDataKey" Type="Self.UserDataKey" Multiplicity="1" />
          <End Role="UserData" Type="Self.UserData" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="UserDataKey">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserData">
              <PropertyRef Name="KeyId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUserSentry__UsrUser">
          <End Role="User" Type="Self.User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Role="UserSentry" Type="Self.UserSentry" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserSentry">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_MsgMessageTransportId__CfgTransportType">
          <End Role="TransportType" Type="Self.TransportType" Multiplicity="1" />
          <End Role="MessageTransportId" Type="Self.MessageTransportId" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageTransportId">
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_UsrMsgAddressee__AddrUserId">
          <End Role="User" Type="Self.User" Multiplicity="1" />
          <End Role="MsgAddressee" Type="Self.MsgAddressee" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MsgAddressee">
              <PropertyRef Name="AddrUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_UsrScenarioProcess__CfgTransportType">
          <End Role="TransportType" Type="Self.TransportType" Multiplicity="1" />
          <End Role="ScenarioProcess" Type="Self.ScenarioProcess" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioProcess">
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_UsrTransport__CfgTransportType">
          <End Role="TransportType" Type="Self.TransportType" Multiplicity="1" />
          <End Role="Transport" Type="Self.Transport" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Transport">
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Function Name="SetLastDeliveredEvent" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="Msg">
          <Parameter Name="userId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="eventId" Type="bigint" Mode="In" />
        </Function>
        <Function Name="BroadcastProhibition_Structure" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="userId" Type="uniqueidentifier" Mode="In" />
          <ReturnType>
            <CollectionType>
              <RowType>
                <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
              </RowType>
            </CollectionType>
          </ReturnType>
        </Function>
        <Function Name="DelUserData" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="UserId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="Key" Type="nvarchar" Mode="In" />
        </Function>
        <Function Name="GetUserData" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr" ReturnType="nvarchar(max)">
          <Parameter Name="UserId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="Key" Type="nvarchar" Mode="In" />
        </Function>
        <Function Name="MergeUsers" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="master" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="donor" Type="uniqueidentifier" Mode="In" />
        </Function>
        <Function Name="SetUserData" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="UserId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="Key" Type="nvarchar" Mode="In" />
          <Parameter Name="Data" Type="nvarchar(max)" Mode="In" />
        </Function>
        <Function Name="Update_OwnerUserId_By_ParentFLUserNumber" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr" />
        <Function Name="User_DisableNotImportedUsers" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="userId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="userNumber" Type="int" Mode="In" />
          <Parameter Name="passedHours" Type="int" Mode="In" />
        </Function>
        <Function Name="User_GetAddresseesForExternalTrans" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="userId" Type="uniqueidentifier" Mode="In" />
          <ReturnType>
            <CollectionType>
              <RowType>
                <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
                <Property Name="Order" Type="int" Nullable="false" />
                <Property Name="SubOrder" Type="bigint" />
              </RowType>
            </CollectionType>
          </ReturnType>
        </Function>
        <Function Name="User_GetChilds" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="userId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="maxDeep" Type="int" Mode="In" />
          <Parameter Name="includeDeleted" Type="bit" Mode="In" />
          <ReturnType>
            <CollectionType>
              <RowType>
                <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
                <Property Name="Deep" Type="int" Nullable="false" />
                <Property Name="OwnerUserId" Type="uniqueidentifier" Nullable="false" />
              </RowType>
            </CollectionType>
          </ReturnType>
        </Function>
        <Function Name="User_GetParents" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="true" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="userId" Type="uniqueidentifier" Mode="In" />
          <Parameter Name="maxDeep" Type="int" Mode="In" />
          <ReturnType>
            <CollectionType>
              <RowType>
                <Property Name="UserId" Type="uniqueidentifier" Nullable="false" />
                <Property Name="Deep" Type="int" Nullable="false" />
              </RowType>
            </CollectionType>
          </ReturnType>
        </Function>
        <Function Name="User_UpdateDeepChilds" Aggregate="false" BuiltIn="false" NiladicFunction="false" IsComposable="false" ParameterTypeSemantics="AllowImplicitConversion" Schema="Usr">
          <Parameter Name="userId" Type="uniqueidentifier" Mode="In" />
        </Function>
        <EntityContainer Name="ModelStoreContainer">
          <EntitySet Name="AuthToken" EntityType="Self.AuthToken" Schema="Auth" store:Type="Tables" />
          <EntitySet Name="SmsCode" EntityType="Self.SmsCode" Schema="Auth" store:Type="Tables" />
          <EntitySet Name="EventType" EntityType="Self.EventType" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="ExternalTransportButton" EntityType="Self.ExternalTransportButton" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="MediaType" EntityType="Self.MediaType" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="MediaTypeGroup" EntityType="Self.MediaTypeGroup" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="MessageType" EntityType="Self.MessageType" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="Scenario" EntityType="Self.Scenario" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="ScenarioStep" EntityType="Self.ScenarioStep" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="Settings" EntityType="Self.Settings" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="TransportType" EntityType="Self.TransportType" Schema="Cfg" store:Type="Tables" />
          <EntitySet Name="City" EntityType="Self.City" Schema="Dir" store:Type="Tables" />
          <EntitySet Name="Country" EntityType="Self.Country" Schema="Dir" store:Type="Tables" />
          <EntitySet Name="Rank" EntityType="Self.Rank" Schema="Dir" store:Type="Tables" />
          <EntitySet Name="Region" EntityType="Self.Region" Schema="Dir" store:Type="Tables" />
          <EntitySet Name="FileInfo" EntityType="Self.FileInfo" Schema="File" store:Type="Tables" />
          <EntitySet Name="Event" EntityType="Self.Event" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="EventAddressee" EntityType="Self.EventAddressee" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="EventDelivered" EntityType="Self.EventDelivered" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="Message" EntityType="Self.Message" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="MessageError" EntityType="Self.MessageError" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="MessageToSegment" EntityType="Self.MessageToSegment" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="MessageToSelection" EntityType="Self.MessageToSelection" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="MessageToUser" EntityType="Self.MessageToUser" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="MessageTransportId" EntityType="Self.MessageTransportId" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="WebChatAccepted" EntityType="Self.WebChatAccepted" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="WebChatDeepLink" EntityType="Self.WebChatDeepLink" Schema="Msg" store:Type="Tables" />
          <EntitySet Name="StructureNode" EntityType="Self.StructureNode" Schema="Ui" store:Type="Tables" />
          <EntitySet Name="StructureNodeSegment" EntityType="Self.StructureNodeSegment" Schema="Ui" store:Type="Tables" />
          <EntitySet Name="BroadcastProhibition" EntityType="Self.BroadcastProhibition" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="Comment" EntityType="Self.Comment" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="Contact" EntityType="Self.Contact" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="Group" EntityType="Self.Group" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="GroupMember" EntityType="Self.GroupMember" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="MatchedPhones" EntityType="Self.MatchedPhones" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="MsgAddressee" EntityType="Self.MsgAddressee" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="PersonalProhibition" EntityType="Self.PersonalProhibition" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="ScenarioProcess" EntityType="Self.ScenarioProcess" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="Segment" EntityType="Self.Segment" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="SegmentMember" EntityType="Self.SegmentMember" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="Transport" EntityType="Self.Transport" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="User" EntityType="Self.User" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="UserAvatar" EntityType="Self.UserAvatar" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="UserData" EntityType="Self.UserData" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="UserDataKey" EntityType="Self.UserDataKey" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="UserSentry" EntityType="Self.UserSentry" Schema="Usr" store:Type="Tables" />
          <EntitySet Name="LastMessageView" EntityType="Self.LastMessageView" store:Type="Views" store:Schema="Msg">
            <DefiningQuery>SELECT 
    [LastMessageView].[UserId] AS [UserId], 
    [LastMessageView].[UserOppId] AS [UserOppId], 
    [LastMessageView].[MsgId] AS [MsgId], 
    [LastMessageView].[MsgIdx] AS [MsgIdx], 
    [LastMessageView].[ToTransportTypeId] AS [ToTransportTypeId], 
    [LastMessageView].[Income] AS [Income], 
    [LastMessageView].[MsgToUserIdx] AS [MsgToUserIdx], 
    [LastMessageView].[UnreadCnt] AS [UnreadCnt]
    FROM [Msg].[LastMessageView] AS [LastMessageView]</DefiningQuery>
          </EntitySet>
          <EntitySet Name="MessageCountOverToday" EntityType="Self.MessageCountOverToday" store:Type="Views" store:Schema="Msg">
            <DefiningQuery>SELECT 
    [MessageCountOverToday].[MessageTypeId] AS [MessageTypeId], 
    [MessageCountOverToday].[FromUserId] AS [FromUserId], 
    [MessageCountOverToday].[Count] AS [Count]
    FROM [Msg].[MessageCountOverToday] AS [MessageCountOverToday]</DefiningQuery>
          </EntitySet>
          <EntitySet Name="MessageStatsGroupedView" EntityType="Self.MessageStatsGroupedView" store:Type="Views" store:Schema="Msg">
            <DefiningQuery>SELECT 
    [MessageStatsGroupedView].[MsgId] AS [MsgId], 
    [MessageStatsGroupedView].[MsgIdx] AS [MsgIdx], 
    [MessageStatsGroupedView].[MessageTypeId] AS [MessageTypeId], 
    [MessageStatsGroupedView].[FromUserId] AS [FromUserId], 
    [MessageStatsGroupedView].[RecipientCount] AS [RecipientCount], 
    [MessageStatsGroupedView].[WebChatCount] AS [WebChatCount], 
    [MessageStatsGroupedView].[FailedCount] AS [FailedCount], 
    [MessageStatsGroupedView].[SentCount] AS [SentCount], 
    [MessageStatsGroupedView].[QuequedCount] AS [QuequedCount], 
    [MessageStatsGroupedView].[CantSendToWebChatCount] AS [CantSendToWebChatCount], 
    [MessageStatsGroupedView].[WebChatAcceptedCount] AS [WebChatAcceptedCount], 
    [MessageStatsGroupedView].[SmsUrlOpenedCount] AS [SmsUrlOpenedCount]
    FROM [Msg].[MessageStatsGroupedView] AS [MessageStatsGroupedView]</DefiningQuery>
          </EntitySet>
          <EntitySet Name="MessageStatsRowsView" EntityType="Self.MessageStatsRowsView" store:Type="Views" store:Schema="Msg">
            <DefiningQuery>SELECT 
    [MessageStatsRowsView].[MsgId] AS [MsgId], 
    [MessageStatsRowsView].[MsgIdx] AS [MsgIdx], 
    [MessageStatsRowsView].[MessageTypeId] AS [MessageTypeId], 
    [MessageStatsRowsView].[FromUserId] AS [FromUserId], 
    [MessageStatsRowsView].[ToUserId] AS [ToUserId], 
    [MessageStatsRowsView].[ToTransportTypeId] AS [ToTransportTypeId], 
    [MessageStatsRowsView].[IsWebChat] AS [IsWebChat], 
    [MessageStatsRowsView].[IsFailed] AS [IsFailed], 
    [MessageStatsRowsView].[IsSent] AS [IsSent], 
    [MessageStatsRowsView].[IsQuequed] AS [IsQuequed], 
    [MessageStatsRowsView].[CantSendToWebChat] AS [CantSendToWebChat], 
    [MessageStatsRowsView].[IsWebChatAccepted] AS [IsWebChatAccepted], 
    [MessageStatsRowsView].[IsSmsUrlOpened] AS [IsSmsUrlOpened]
    FROM [Msg].[MessageStatsRowsView] AS [MessageStatsRowsView]</DefiningQuery>
          </EntitySet>
          <EntitySet Name="UserDefaultTransportView" EntityType="Self.UserDefaultTransportView" store:Type="Views" store:Schema="Usr">
            <DefiningQuery>SELECT 
    [UserDefaultTransportView].[UserId] AS [UserId], 
    [UserDefaultTransportView].[DefaultTransportTypeId] AS [DefaultTransportTypeId]
    FROM [Usr].[UserDefaultTransportView] AS [UserDefaultTransportView]</DefiningQuery>
          </EntitySet>
          <EntitySet Name="UserMailingTransportView" EntityType="Self.UserMailingTransportView" store:Type="Views" store:Schema="Usr">
            <DefiningQuery>SELECT 
    [UserMailingTransportView].[UserId] AS [UserId], 
    [UserMailingTransportView].[DefaultTransportTypeId] AS [DefaultTransportTypeId]
    FROM [Usr].[UserMailingTransportView] AS [UserMailingTransportView]</DefiningQuery>
          </EntitySet>
          <AssociationSet Name="FK__AuthSmsCode__UsrUser" Association="Self.FK__AuthSmsCode__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="SmsCode" EntitySet="SmsCode" />
          </AssociationSet>
          <AssociationSet Name="FK__AuthToken__UsrUser" Association="Self.FK__AuthToken__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="AuthToken" EntitySet="AuthToken" />
          </AssociationSet>
          <AssociationSet Name="FK__CfgScenarioStep__CfgScenario" Association="Self.FK__CfgScenarioStep__CfgScenario">
            <End Role="Scenario" EntitySet="Scenario" />
            <End Role="ScenarioStep" EntitySet="ScenarioStep" />
          </AssociationSet>
          <AssociationSet Name="FK__DirCity__DirRegion" Association="Self.FK__DirCity__DirRegion">
            <End Role="Region" EntitySet="Region" />
            <End Role="City" EntitySet="City" />
          </AssociationSet>
          <AssociationSet Name="FK__DirRegion__DirCountry" Association="Self.FK__DirRegion__DirCountry">
            <End Role="Country" EntitySet="Country" />
            <End Role="Region" EntitySet="Region" />
          </AssociationSet>
          <AssociationSet Name="FK__FileFile__CfgMediaType" Association="Self.FK__FileFile__CfgMediaType">
            <End Role="MediaType" EntitySet="MediaType" />
            <End Role="FileInfo" EntitySet="FileInfo" />
          </AssociationSet>
          <AssociationSet Name="FK__FileFile__UsrUser" Association="Self.FK__FileFile__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="FileInfo" EntitySet="FileInfo" />
          </AssociationSet>
          <AssociationSet Name="FK__MediaTypeId__MediaTypeGroupId" Association="Self.FK__MediaTypeId__MediaTypeGroupId">
            <End Role="MediaTypeGroup" EntitySet="MediaTypeGroup" />
            <End Role="MediaType" EntitySet="MediaType" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEvent__CfgEventType" Association="Self.FK__MsgEvent__CfgEventType">
            <End Role="EventType" EntitySet="EventType" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEvent__MsgMessage" Association="Self.FK__MsgEvent__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEvent__UsrTransport" Association="Self.FK__MsgEvent__UsrTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEvent__UsrUserCaused" Association="Self.FK__MsgEvent__UsrUserCaused">
            <End Role="User" EntitySet="User" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEventAddressee__MsgEvent" Association="Self.FK__MsgEventAddressee__MsgEvent">
            <End Role="Event" EntitySet="Event" />
            <End Role="EventAddressee" EntitySet="EventAddressee" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEventAddressee__UsrUser" Association="Self.FK__MsgEventAddressee__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="EventAddressee" EntitySet="EventAddressee" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEventDelivered__MsgEvent" Association="Self.FK__MsgEventDelivered__MsgEvent">
            <End Role="Event" EntitySet="Event" />
            <End Role="EventDelivered" EntitySet="EventDelivered" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEventDelivered__UsrUser" Association="Self.FK__MsgEventDelivered__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="EventDelivered" EntitySet="EventDelivered" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMesage__FileInfoFile" Association="Self.FK__MsgMesage__FileInfoFile">
            <End Role="FileInfo" EntitySet="FileInfo" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__AnswerMessage" Association="Self.FK__MsgMessage__AnswerMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="Message1" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__CfgMessageType" Association="Self.FK__MsgMessage__CfgMessageType">
            <End Role="MessageType" EntitySet="MessageType" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__CfgScenarioStep" Association="Self.FK__MsgMessage__CfgScenarioStep">
            <End Role="ScenarioStep" EntitySet="ScenarioStep" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__ForwardMsgId" Association="Self.FK__MsgMessage__ForwardMsgId">
            <End Role="Message" EntitySet="Message" />
            <End Role="Message1" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__FromTransport" Association="Self.FK__MsgMessage__FromTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageError__MsgMessage" Association="Self.FK__MsgMessageError__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageError" EntitySet="MessageError" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageError__MsgMessageToUser" Association="Self.FK__MsgMessageError__MsgMessageToUser">
            <End Role="MessageToUser" EntitySet="MessageToUser" />
            <End Role="MessageError" EntitySet="MessageError" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToSegment__MsgMessage" Association="Self.FK__MsgMessageToSegment__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageToSegment" EntitySet="MessageToSegment" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToSegment__UsrSegment" Association="Self.FK__MsgMessageToSegment__UsrSegment">
            <End Role="Segment" EntitySet="Segment" />
            <End Role="MessageToSegment" EntitySet="MessageToSegment" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToSelection__MsgMessage" Association="Self.FK__MsgMessageToSelection__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageToSelection" EntitySet="MessageToSelection" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToSelection__UsrUser" Association="Self.FK__MsgMessageToSelection__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="MessageToSelection" EntitySet="MessageToSelection" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToUser__MsgMessage" Association="Self.FK__MsgMessageToUser__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageToUser" EntitySet="MessageToUser" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToUser__UsrTransport" Association="Self.FK__MsgMessageToUser__UsrTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="MessageToUser" EntitySet="MessageToUser" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageTransportId__MsgMessage" Association="Self.FK__MsgMessageTransportId__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageTransportId" EntitySet="MessageTransportId" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageTransportId__MsgMessageToUser" Association="Self.FK__MsgMessageTransportId__MsgMessageToUser">
            <End Role="MessageToUser" EntitySet="MessageToUser" />
            <End Role="MessageTransportId" EntitySet="MessageTransportId" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgWebChatAccepted__CfgTransportTypeId" Association="Self.FK__MsgWebChatAccepted__CfgTransportTypeId">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="WebChatAccepted" EntitySet="WebChatAccepted" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgWebChatAccepted__MsgWebChatDeepLink" Association="Self.FK__MsgWebChatAccepted__MsgWebChatDeepLink">
            <End Role="WebChatDeepLink" EntitySet="WebChatDeepLink" />
            <End Role="WebChatAccepted" EntitySet="WebChatAccepted" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgWebChatDeepLink__CfgTransportType" Association="Self.FK__MsgWebChatDeepLink__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="WebChatDeepLink" EntitySet="WebChatDeepLink" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgWebChatDeepLink__MsgMessageToUser" Association="Self.FK__MsgWebChatDeepLink__MsgMessageToUser">
            <End Role="MessageToUser" EntitySet="MessageToUser" />
            <End Role="WebChatDeepLink" EntitySet="WebChatDeepLink" />
          </AssociationSet>
          <AssociationSet Name="FK__UiStructureNode__UiStructureNode" Association="Self.FK__UiStructureNode__UiStructureNode">
            <End Role="StructureNode" EntitySet="StructureNode" />
            <End Role="StructureNode1" EntitySet="StructureNode" />
          </AssociationSet>
          <AssociationSet Name="FK__UiStructureNodeSegment__UiStructureNode" Association="Self.FK__UiStructureNodeSegment__UiStructureNode">
            <End Role="StructureNode" EntitySet="StructureNode" />
            <End Role="StructureNodeSegment" EntitySet="StructureNodeSegment" />
          </AssociationSet>
          <AssociationSet Name="FK__UiStructureNodeSegment__UsrSegment" Association="Self.FK__UiStructureNodeSegment__UsrSegment">
            <End Role="Segment" EntitySet="Segment" />
            <End Role="StructureNodeSegment" EntitySet="StructureNodeSegment" />
          </AssociationSet>
          <AssociationSet Name="FK__UserAvatar__MediaType_Id" Association="Self.FK__UserAvatar__MediaType_Id">
            <End Role="MediaType" EntitySet="MediaType" />
            <End Role="UserAvatar" EntitySet="UserAvatar" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrBroadcastProhibition__ProhibitionUserId" Association="Self.FK__UsrBroadcastProhibition__ProhibitionUserId">
            <End Role="User" EntitySet="User" />
            <End Role="BroadcastProhibition" EntitySet="BroadcastProhibition" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrBroadcastProhibition__UserId" Association="Self.FK__UsrBroadcastProhibition__UserId">
            <End Role="User" EntitySet="User" />
            <End Role="BroadcastProhibition" EntitySet="BroadcastProhibition" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrComment__UsrUser_1" Association="Self.FK__UsrComment__UsrUser_1">
            <End Role="User" EntitySet="User" />
            <End Role="Comment" EntitySet="Comment" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrComment__UsrUser_2" Association="Self.FK__UsrComment__UsrUser_2">
            <End Role="User" EntitySet="User" />
            <End Role="Comment" EntitySet="Comment" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrContact__UsrUser1" Association="Self.FK__UsrContact__UsrUser1">
            <End Role="User" EntitySet="User" />
            <End Role="Contact" EntitySet="Contact" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrContact__UsrUser2" Association="Self.FK__UsrContact__UsrUser2">
            <End Role="User" EntitySet="User" />
            <End Role="Contact" EntitySet="Contact" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrGroup__UsrUserOwned" Association="Self.FK__UsrGroup__UsrUserOwned">
            <End Role="User" EntitySet="User" />
            <End Role="Group" EntitySet="Group" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrGroupList__UsrGroup" Association="Self.FK__UsrGroupList__UsrGroup">
            <End Role="Group" EntitySet="Group" />
            <End Role="GroupMember" EntitySet="GroupMember" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrGroupList__UsrUser" Association="Self.FK__UsrGroupList__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="GroupMember" EntitySet="GroupMember" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrMatchedPhones__AddrUserId" Association="Self.FK__UsrMatchedPhones__AddrUserId">
            <End Role="User" EntitySet="User" />
            <End Role="MatchedPhones" EntitySet="MatchedPhones" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrMatchedPhones__UsrUser" Association="Self.FK__UsrMatchedPhones__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="MatchedPhones" EntitySet="MatchedPhones" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrMsgAddressee__UsrTransport" Association="Self.FK__UsrMsgAddressee__UsrTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="MsgAddressee" EntitySet="MsgAddressee" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrPersonalProhibition__ProhibitionUserId" Association="Self.FK__UsrPersonalProhibition__ProhibitionUserId">
            <End Role="User" EntitySet="User" />
            <End Role="PersonalProhibition" EntitySet="PersonalProhibition" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrPersonalProhibition__UserId" Association="Self.FK__UsrPersonalProhibition__UserId">
            <End Role="User" EntitySet="User" />
            <End Role="PersonalProhibition" EntitySet="PersonalProhibition" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrScenarioProcess__CfgScenarioStep" Association="Self.FK__UsrScenarioProcess__CfgScenarioStep">
            <End Role="ScenarioStep" EntitySet="ScenarioStep" />
            <End Role="ScenarioProcess" EntitySet="ScenarioProcess" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrScenarioProcess__UsrUser" Association="Self.FK__UsrScenarioProcess__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="ScenarioProcess" EntitySet="ScenarioProcess" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrSegmentMember__UsrSegment" Association="Self.FK__UsrSegmentMember__UsrSegment">
            <End Role="Segment" EntitySet="Segment" />
            <End Role="SegmentMember" EntitySet="SegmentMember" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrSegmentMember__UsrUser" Association="Self.FK__UsrSegmentMember__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="SegmentMember" EntitySet="SegmentMember" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrTransport__UsrUser" Association="Self.FK__UsrTransport__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="Transport" EntitySet="Transport" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUser__DirCity" Association="Self.FK__UsrUser__DirCity">
            <End Role="City" EntitySet="City" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUser__DirRank" Association="Self.FK__UsrUser__DirRank">
            <End Role="Rank" EntitySet="Rank" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUser__UsrTransport" Association="Self.FK__UsrUser__UsrTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUser__UsrUserOwned" Association="Self.FK__UsrUser__UsrUserOwned">
            <End Role="User" EntitySet="User" />
            <End Role="User1" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUserAvatar__UsrUser" Association="Self.FK__UsrUserAvatar__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="UserAvatar" EntitySet="UserAvatar" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUserData__UsrUser" Association="Self.FK__UsrUserData__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="UserData" EntitySet="UserData" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUserData__UsrUserDataKey" Association="Self.FK__UsrUserData__UsrUserDataKey">
            <End Role="UserDataKey" EntitySet="UserDataKey" />
            <End Role="UserData" EntitySet="UserData" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUserSentry__UsrUser" Association="Self.FK__UsrUserSentry__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="UserSentry" EntitySet="UserSentry" />
          </AssociationSet>
          <AssociationSet Name="FK_MsgMessageTransportId__CfgTransportType" Association="Self.FK_MsgMessageTransportId__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="MessageTransportId" EntitySet="MessageTransportId" />
          </AssociationSet>
          <AssociationSet Name="FK_UsrMsgAddressee__AddrUserId" Association="Self.FK_UsrMsgAddressee__AddrUserId">
            <End Role="User" EntitySet="User" />
            <End Role="MsgAddressee" EntitySet="MsgAddressee" />
          </AssociationSet>
          <AssociationSet Name="FK_UsrScenarioProcess__CfgTransportType" Association="Self.FK_UsrScenarioProcess__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="ScenarioProcess" EntitySet="ScenarioProcess" />
          </AssociationSet>
          <AssociationSet Name="FK_UsrTransport__CfgTransportType" Association="Self.FK_UsrTransport__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="Transport" EntitySet="Transport" />
          </AssociationSet>
        </EntityContainer>
      </Schema></edmx:StorageModels>
    <!-- CSDL content -->
    <edmx:ConceptualModels>
      <Schema Namespace="Model" Alias="Self" annotation:UseStrongSpatialTypes="false" xmlns:annotation="http://schemas.microsoft.com/ado/2009/02/edm/annotation" xmlns:customannotation="http://schemas.microsoft.com/ado/2013/11/edm/customannotation" xmlns="http://schemas.microsoft.com/ado/2009/11/edm">
        <EntityContainer Name="ChatEntities" annotation:LazyLoadingEnabled="true">
          <EntitySet Name="AuthToken" EntityType="Model.AuthToken" />
          <EntitySet Name="SmsCode" EntityType="Model.SmsCode" />
          <EntitySet Name="EventType" EntityType="Model.EventType" />
          <EntitySet Name="MessageType" EntityType="Model.MessageType" />
          <EntitySet Name="TransportType" EntityType="Model.TransportType" />
          <EntitySet Name="Transport" EntityType="Model.Transport" />
          <EntitySet Name="User" EntityType="Model.User" />
          <EntitySet Name="UserAvatar" EntityType="Model.UserAvatar" />
          <AssociationSet Name="FK__AuthToken__UsrUser" Association="Model.FK__AuthToken__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="AuthToken" EntitySet="AuthToken" />
          </AssociationSet>
          <AssociationSet Name="FK__AuthSmsCode__UsrUser" Association="Model.FK__AuthSmsCode__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="SmsCode" EntitySet="SmsCode" />
          </AssociationSet>
          <AssociationSet Name="FK_UsrTransport__CfgTransportType" Association="Model.FK_UsrTransport__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="Transport" EntitySet="Transport" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrTransport__UsrUser" Association="Model.FK__UsrTransport__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="Transport" EntitySet="Transport" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUser__UsrTransport" Association="Model.FK__UsrUser__UsrTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUserAvatar__UsrUser" Association="Model.FK__UsrUserAvatar__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="UserAvatar" EntitySet="UserAvatar" />
          </AssociationSet>
          <AssociationSet Name="Contact" Association="Model.Contact">
            <End Role="User" EntitySet="User" />
            <End Role="User1" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUser__UsrUserOwned" Association="Model.FK__UsrUser__UsrUserOwned">
            <End Role="User" EntitySet="User" />
            <End Role="User1" EntitySet="User" />
          </AssociationSet>
          <EntitySet Name="UserDefaultTransportView" EntityType="Model.UserDefaultTransportView" />
          <EntitySet Name="MessageToUser" EntityType="Model.MessageToUser" />
          <AssociationSet Name="FK__MsgMessageToUser__UsrTransport" Association="Model.FK__MsgMessageToUser__UsrTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="MessageToUser" EntitySet="MessageToUser" />
          </AssociationSet>
          <EntitySet Name="Event" EntityType="Model.Event" />
          <EntitySet Name="Message" EntityType="Model.Message" />
          <AssociationSet Name="FK__MsgEvent__CfgEventType" Association="Model.FK__MsgEvent__CfgEventType">
            <End Role="EventType" EntitySet="EventType" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__CfgMessageType" Association="Model.FK__MsgMessage__CfgMessageType">
            <End Role="MessageType" EntitySet="MessageType" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEvent__MsgMessage" Association="Model.FK__MsgEvent__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEvent__UsrTransport" Association="Model.FK__MsgEvent__UsrTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgEvent__UsrUserCaused" Association="Model.FK__MsgEvent__UsrUserCaused">
            <End Role="User" EntitySet="User" />
            <End Role="Event" EntitySet="Event" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__AnswerMessage" Association="Model.FK__MsgMessage__AnswerMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="Message1" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__FromTransport" Association="Model.FK__MsgMessage__FromTransport">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToUser__MsgMessage" Association="Model.FK__MsgMessageToUser__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageToUser" EntitySet="MessageToUser" />
          </AssociationSet>
          <AssociationSet Name="EventAddressee" Association="Model.EventAddressee">
            <End Role="Event" EntitySet="Event" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="EventDelivered" Association="Model.EventDelivered">
            <End Role="Event" EntitySet="Event" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <EntitySet Name="MediaType" EntityType="Model.MediaType" />
          <AssociationSet Name="FK__UserAvatar__MediaType_Id" Association="Model.FK__UserAvatar__MediaType_Id">
            <End Role="MediaType" EntitySet="MediaType" />
            <End Role="UserAvatar" EntitySet="UserAvatar" />
          </AssociationSet>
          <FunctionImport Name="SetLastDeliveredEvent">
            <Parameter Name="userId" Mode="In" Type="Guid" />
            <Parameter Name="eventId" Mode="In" Type="Int64" />
          </FunctionImport>
          <EntitySet Name="Group" EntityType="Model.Group" />
          <EntitySet Name="GroupMember" EntityType="Model.GroupMember" />
          <AssociationSet Name="FK__UsrGroup__UsrUserOwned" Association="Model.FK__UsrGroup__UsrUserOwned">
            <End Role="User" EntitySet="User" />
            <End Role="Group" EntitySet="Group" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrGroupList__UsrGroup" Association="Model.FK__UsrGroupList__UsrGroup">
            <End Role="Group" EntitySet="Group" />
            <End Role="GroupMember" EntitySet="GroupMember" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrGroupList__UsrUser" Association="Model.FK__UsrGroupList__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="GroupMember" EntitySet="GroupMember" />
          </AssociationSet>
          <EntitySet Name="MessageError" EntityType="Model.MessageError" />
          <AssociationSet Name="FK__MsgMessageError__MsgMessage" Association="Model.FK__MsgMessageError__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageError" EntitySet="MessageError" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageError__MsgMessageToUser" Association="Model.FK__MsgMessageError__MsgMessageToUser">
            <End Role="MessageToUser" EntitySet="MessageToUser" />
            <End Role="MessageError" EntitySet="MessageError" />
          </AssociationSet>
          <EntitySet Name="Segment" EntityType="Model.Segment" />
          <AssociationSet Name="SegmentMember" Association="Model.SegmentMember">
            <End Role="Segment" EntitySet="Segment" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <EntitySet Name="MessageTransportId" EntityType="Model.MessageTransportId" />
          <AssociationSet Name="FK_MsgMessageTransportId__CfgTransportType" Association="Model.FK_MsgMessageTransportId__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="MessageTransportId" EntitySet="MessageTransportId" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageTransportId__MsgMessage" Association="Model.FK__MsgMessageTransportId__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageTransportId" EntitySet="MessageTransportId" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageTransportId__MsgMessageToUser" Association="Model.FK__MsgMessageTransportId__MsgMessageToUser">
            <End Role="MessageToUser" EntitySet="MessageToUser" />
            <End Role="MessageTransportId" EntitySet="MessageTransportId" />
          </AssociationSet>
          <FunctionImport Name="MergeUsers" ReturnType="Collection(Guid)">
            <Parameter Name="master" Mode="In" Type="Guid" />
            <Parameter Name="donor" Mode="In" Type="Guid" />
          </FunctionImport>
          <EntitySet Name="StructureNodeSegment" EntityType="Model.StructureNodeSegment" />
          <AssociationSet Name="FK__UiStructureNodeSegment__UsrSegment" Association="Model.FK__UiStructureNodeSegment__UsrSegment">
            <End Role="Segment" EntitySet="Segment" />
            <End Role="StructureNodeSegment" EntitySet="StructureNodeSegment" />
          </AssociationSet>
          <EntitySet Name="StructureNode" EntityType="Model.StructureNode" />
          <AssociationSet Name="FK__UiStructureNode__UiStructureNode" Association="Model.FK__UiStructureNode__UiStructureNode">
            <End Role="StructureNode" EntitySet="StructureNode" />
            <End Role="StructureNode1" EntitySet="StructureNode" />
          </AssociationSet>
          <AssociationSet Name="FK__UiStructureNodeSegment__UiStructureNode" Association="Model.FK__UiStructureNodeSegment__UiStructureNode">
            <End Role="StructureNode" EntitySet="StructureNode" />
            <End Role="StructureNodeSegment" EntitySet="StructureNodeSegment" />
          </AssociationSet>
          <EntitySet Name="MessageToSegment" EntityType="Model.MessageToSegment" />
          <AssociationSet Name="FK__MsgMessageToSegment__MsgMessage" Association="Model.FK__MsgMessageToSegment__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageToSegment" EntitySet="MessageToSegment" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToSegment__UsrSegment" Association="Model.FK__MsgMessageToSegment__UsrSegment">
            <End Role="Segment" EntitySet="Segment" />
            <End Role="MessageToSegment" EntitySet="MessageToSegment" />
          </AssociationSet>
          <EntitySet Name="Rank" EntityType="Model.Rank" />
          <AssociationSet Name="FK__UsrUser__DirRank" Association="Model.FK__UsrUser__DirRank">
            <End Role="Rank" EntitySet="Rank" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <EntitySet Name="UserSentry" EntityType="Model.UserSentry" />
          <AssociationSet Name="FK__UsrUserSentry__UsrUser" Association="Model.FK__UsrUserSentry__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="UserSentry" EntitySet="UserSentry" />
          </AssociationSet>
          <EntitySet Name="Settings" EntityType="Model.Settings" />
          <EntitySet Name="WebChatDeepLink" EntityType="Model.WebChatDeepLink" />
          <AssociationSet Name="FK__MsgMessage__ForwardMsgId" Association="Model.FK__MsgMessage__ForwardMsgId">
            <End Role="Message" EntitySet="Message" />
            <End Role="Message1" EntitySet="Message" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgWebChatDeepLink__MsgMessageToUser" Association="Model.FK__MsgWebChatDeepLink__MsgMessageToUser">
            <End Role="MessageToUser" EntitySet="MessageToUser" />
            <End Role="WebChatDeepLink" EntitySet="WebChatDeepLink" />
          </AssociationSet>
          <AssociationSet Name="WebChatAccepted" Association="Model.WebChatAccepted">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="WebChatDeepLink" EntitySet="WebChatDeepLink" />
          </AssociationSet>
          <EntitySet Name="LastMessageView" EntityType="Model.LastMessageView" />
          <EntitySet Name="Comment" EntityType="Model.Comment" />
          <AssociationSet Name="FK__UsrComment__UsrUser_1" Association="Model.FK__UsrComment__UsrUser_1">
            <End Role="User" EntitySet="User" />
            <End Role="Comment" EntitySet="Comment" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrComment__UsrUser_2" Association="Model.FK__UsrComment__UsrUser_2">
            <End Role="User" EntitySet="User" />
            <End Role="Comment" EntitySet="Comment" />
          </AssociationSet>
          <FunctionImport Name="User_GetParents" IsComposable="true" ReturnType="Collection(Model.User_GetParents_Result)">
            <Parameter Name="userId" Mode="In" Type="Guid" />
            <Parameter Name="maxDeep" Mode="In" Type="Int32" />
          </FunctionImport>
          <FunctionImport Name="User_GetAddresseesForExternalTrans" IsComposable="true" ReturnType="Collection(Model.User_GetAddresseesForExternalTrans_Result)">
          <Parameter Name="userId" Mode="In" Type="Guid" />
          </FunctionImport>
          <AssociationSet Name="MsgAddressee" Association="Model.MsgAddressee">
            <End Role="Transport" EntitySet="Transport" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <EntitySet Name="ExternalTransportButton" EntityType="Model.ExternalTransportButton" />
          <EntitySet Name="City" EntityType="Model.City" />
          <EntitySet Name="Country" EntityType="Model.Country" />
          <EntitySet Name="Region" EntityType="Model.Region" />
          <AssociationSet Name="FK__DirCity__DirRegion" Association="Model.FK__DirCity__DirRegion">
            <End Role="Region" EntitySet="Region" />
            <End Role="City" EntitySet="City" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUser__DirCity" Association="Model.FK__UsrUser__DirCity">
            <End Role="City" EntitySet="City" />
            <End Role="User" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="FK__DirRegion__DirCountry" Association="Model.FK__DirRegion__DirCountry">
            <End Role="Country" EntitySet="Country" />
            <End Role="Region" EntitySet="Region" />
          </AssociationSet>
          <EntitySet Name="FileInfo" EntityType="Model.FileInfo" />
          <AssociationSet Name="FK__FileFile__CfgMediaType" Association="Model.FK__FileFile__CfgMediaType">
            <End Role="MediaType" EntitySet="MediaType" />
            <End Role="FileInfo" EntitySet="FileInfo" />
          </AssociationSet>
          <AssociationSet Name="FK__FileFile__UsrUser" Association="Model.FK__FileFile__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="FileInfo" EntitySet="FileInfo" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMesage__FileInfoFile" Association="Model.FK__MsgMesage__FileInfoFile">
            <End Role="FileInfo" EntitySet="FileInfo" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <FunctionImport Name="User_GetChilds" IsComposable="true" ReturnType="Collection(Model.User_GetChilds_Result)">
            <Parameter Name="userId" Mode="In" Type="Guid" />
            <Parameter Name="maxDeep" Mode="In" Type="Int32" />
            <Parameter Name="includeDeleted" Mode="In" Type="Boolean" />
          </FunctionImport>
          <EntitySet Name="MediaTypeGroup" EntityType="Model.MediaTypeGroup" />
          <AssociationSet Name="FK__MediaTypeId__MediaTypeGroupId" Association="Model.FK__MediaTypeId__MediaTypeGroupId">
            <End Role="MediaTypeGroup" EntitySet="MediaTypeGroup" />
            <End Role="MediaType" EntitySet="MediaType" />
          </AssociationSet>
          <EntitySet Name="MessageCountOverToday" EntityType="Model.MessageCountOverToday" />
          <EntitySet Name="UserMailingTransportView" EntityType="Model.UserMailingTransportView" />
          <EntitySet Name="MessageToSelection" EntityType="Model.MessageToSelection" />
          <AssociationSet Name="FK__MsgMessageToSelection__MsgMessage" Association="Model.FK__MsgMessageToSelection__MsgMessage">
            <End Role="Message" EntitySet="Message" />
            <End Role="MessageToSelection" EntitySet="MessageToSelection" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessageToSelection__UsrUser" Association="Model.FK__MsgMessageToSelection__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="MessageToSelection" EntitySet="MessageToSelection" />
          </AssociationSet>
          <AssociationSet Name="BroadcastProhibition" Association="Model.BroadcastProhibition">
            <End Role="User" EntitySet="User" />
            <End Role="User1" EntitySet="User" />
          </AssociationSet>
          <FunctionImport Name="BroadcastProhibition_Structure" IsComposable="true" ReturnType="Collection(Guid)">
          <Parameter Name="userId" Mode="In" Type="Guid" />
          </FunctionImport>
          <EntitySet Name="MessageStatsGroupedView" EntityType="Model.MessageStatsGroupedView" />
          <EntitySet Name="MessageStatsRowsView" EntityType="Model.MessageStatsRowsView" />
          <FunctionImport Name="Update_OwnerUserId_By_ParentFLUserNumber" ReturnType="Collection(Int32)">
            </FunctionImport>
          <FunctionImport Name="User_UpdateDeepChilds">
          <Parameter Name="userId" Mode="In" Type="Guid" />
          </FunctionImport>
          <FunctionImport Name="User_DisableNotImportedUsers" ReturnType="Collection(Int32)">
            <Parameter Name="userId" Mode="In" Type="Guid" />
            <Parameter Name="userNumber" Mode="In" Type="Int32" />
            <Parameter Name="passedHours" Mode="In" Type="Int32" />
          </FunctionImport>
          <AssociationSet Name="FK__MsgWebChatDeepLink__CfgTransportType" Association="Model.FK__MsgWebChatDeepLink__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="WebChatDeepLink" EntitySet="WebChatDeepLink" />
          </AssociationSet>
          <EntitySet Name="Scenario" EntityType="Model.Scenario" />
          <EntitySet Name="ScenarioStep" EntityType="Model.ScenarioStep" />
          <AssociationSet Name="FK__CfgScenarioStep__CfgScenario" Association="Model.FK__CfgScenarioStep__CfgScenario">
            <End Role="Scenario" EntitySet="Scenario" />
            <End Role="ScenarioStep" EntitySet="ScenarioStep" />
          </AssociationSet>
          <AssociationSet Name="FK__MsgMessage__CfgScenarioStep" Association="Model.FK__MsgMessage__CfgScenarioStep">
            <End Role="ScenarioStep" EntitySet="ScenarioStep" />
            <End Role="Message" EntitySet="Message" />
          </AssociationSet>
          <EntitySet Name="ScenarioProcess" EntityType="Model.ScenarioProcess" />
          <AssociationSet Name="FK__UsrScenarioProcess__CfgScenarioStep" Association="Model.FK__UsrScenarioProcess__CfgScenarioStep">
            <End Role="ScenarioStep" EntitySet="ScenarioStep" />
            <End Role="ScenarioProcess" EntitySet="ScenarioProcess" />
          </AssociationSet>
          <AssociationSet Name="FK_UsrScenarioProcess__CfgTransportType" Association="Model.FK_UsrScenarioProcess__CfgTransportType">
            <End Role="TransportType" EntitySet="TransportType" />
            <End Role="ScenarioProcess" EntitySet="ScenarioProcess" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrScenarioProcess__UsrUser" Association="Model.FK__UsrScenarioProcess__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="ScenarioProcess" EntitySet="ScenarioProcess" />
          </AssociationSet>
          <EntitySet Name="UserData" EntityType="Model.UserData" />
          <EntitySet Name="UserDataKey" EntityType="Model.UserDataKey" />
          <AssociationSet Name="FK__UsrUserData__UsrUser" Association="Model.FK__UsrUserData__UsrUser">
            <End Role="User" EntitySet="User" />
            <End Role="UserData" EntitySet="UserData" />
          </AssociationSet>
          <AssociationSet Name="FK__UsrUserData__UsrUserDataKey" Association="Model.FK__UsrUserData__UsrUserDataKey">
            <End Role="UserDataKey" EntitySet="UserDataKey" />
            <End Role="UserData" EntitySet="UserData" />
          </AssociationSet>
          <FunctionImport Name="DelUserData">
            <Parameter Name="UserId" Mode="In" Type="Guid" />
            <Parameter Name="Key" Mode="In" Type="String" />
          </FunctionImport>
          <FunctionImport Name="SetUserData">
            <Parameter Name="UserId" Mode="In" Type="Guid" />
            <Parameter Name="Key" Mode="In" Type="String" />
            <Parameter Name="Data" Mode="In" Type="String" />
          </FunctionImport>
          <AssociationSet Name="MatchedPhones" Association="Model.MatchedPhones">
            <End Role="User" EntitySet="User" />
            <End Role="User1" EntitySet="User" />
          </AssociationSet>
          <AssociationSet Name="PersonalProhibition" Association="Model.PersonalProhibition">
            <End Role="User" EntitySet="User" />
            <End Role="User1" EntitySet="User" />
          </AssociationSet>
          </EntityContainer>
        <EntityType Name="AuthToken">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="Token" Type="String" Nullable="false" MaxLength="255" FixedLength="false" Unicode="false" />
          <Property Name="IssueDate" Type="DateTime" Nullable="false" Precision="3" />
          <Property Name="ExpireBy" Type="Int32" Nullable="false" />
          <NavigationProperty Name="User" Relationship="Model.FK__AuthToken__UsrUser" FromRole="AuthToken" ToRole="User" />
        </EntityType>
        <EntityType Name="SmsCode">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="Code" Type="Int32" Nullable="false" />
          <Property Name="IssueDate" Type="DateTime" Nullable="false" Precision="3" />
          <Property Name="ExpireBySec" Type="Int32" Nullable="false" />
          <NavigationProperty Name="User" Relationship="Model.FK__AuthSmsCode__UsrUser" FromRole="SmsCode" ToRole="User" />
        </EntityType>
        <EntityType Name="EventType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="50" FixedLength="false" Unicode="false" />
          <NavigationProperty Name="Event" Relationship="Model.FK__MsgEvent__CfgEventType" FromRole="EventType" ToRole="Event" />
        </EntityType>
        <EntityType Name="MessageType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="50" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMessage__CfgMessageType" FromRole="MessageType" ToRole="Message" />
          <Property Name="ShowInHistory" Type="Boolean" Nullable="false" />
          <Property Name="LimitForDay" Type="Int32" />
          <Property Name="LimitForOnce" Type="Int32" />
        </EntityType>
        <EntityType Name="TransportType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="50" FixedLength="false" Unicode="false" />
          <Property Name="Enabled" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="Transport" Relationship="Model.FK_UsrTransport__CfgTransportType" FromRole="TransportType" ToRole="Transport" />
          <NavigationProperty Name="MessageTransportId" Relationship="Model.FK_MsgMessageTransportId__CfgTransportType" FromRole="TransportType" ToRole="MessageTransportId" />
          <Property Name="VisibleForUser" Type="Boolean" Nullable="false" />
          <Property Name="CanSelectAsDefault" Type="Boolean" Nullable="false" />
          <Property Name="Prior" Type="Byte" Nullable="false" />
          <Property Name="DeepLink" Type="String" MaxLength="255" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="WebChatDeepLink" Relationship="Model.WebChatAccepted" FromRole="TransportType" ToRole="WebChatDeepLink" />
          <Property Name="InnerTransport" Type="Boolean" Nullable="false" />
          <Property Name="SendGreetingMessage" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="WebChatSbnedTo" Relationship="Model.FK__MsgWebChatDeepLink__CfgTransportType" FromRole="TransportType" ToRole="WebChatDeepLink" />
          <NavigationProperty Name="ScenarioProcess" Relationship="Model.FK_UsrScenarioProcess__CfgTransportType" FromRole="TransportType" ToRole="ScenarioProcess" />
        </EntityType>
        <EntityType Name="Transport">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="TransportTypeId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="TransportTypeId" Type="Int32" Nullable="false" />
          <Property Name="TransportOuterId" Type="String" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="Enabled" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="TransportType" Relationship="Model.FK_UsrTransport__CfgTransportType" FromRole="Transport" ToRole="TransportType" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrTransport__UsrUser" FromRole="Transport" ToRole="User" />
          <NavigationProperty Name="DefaultByUser" Relationship="Model.FK__UsrUser__UsrTransport" FromRole="Transport" ToRole="User" />
          <NavigationProperty Name="MessageToUser" Relationship="Model.FK__MsgMessageToUser__UsrTransport" FromRole="Transport" ToRole="MessageToUser" />
          <NavigationProperty Name="Event" Relationship="Model.FK__MsgEvent__UsrTransport" FromRole="Transport" ToRole="Event" />
          <NavigationProperty Name="Messages" Relationship="Model.FK__MsgMessage__FromTransport" FromRole="Transport" ToRole="Message" />
          <NavigationProperty Name="MsgAddressee" Relationship="Model.MsgAddressee" FromRole="Transport" ToRole="User" />
        </EntityType>
        <EntityType Name="User">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Enabled" Type="Boolean" Nullable="false" DefaultValue="true" />
          <Property Name="FullName" Type="String" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="IsConsultant" Type="Boolean" Nullable="false" />
          <Property Name="RegistrationDate" Type="DateTime" Precision="0" />
          <Property Name="InsertDate" Type="DateTime" Nullable="false" Precision="3" annotation:StoreGeneratedPattern="Computed" />
          <Property Name="SignUpDate" Type="DateTime" Precision="3" />
          <Property Name="Phone" Type="String" MaxLength="20" FixedLength="false" Unicode="false" />
          <Property Name="Email" Type="String" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="Login" Type="String" MaxLength="255" FixedLength="false" Unicode="false" />
          <Property Name="PswHash" Type="String" MaxLength="255" FixedLength="false" Unicode="false" />
          <Property Name="OwnerUserId" Type="Guid" />
          <Property Name="DefaultTransportTypeId" Type="Int32" />
          <Property Name="AvatarUploadDate" Type="DateTime" Precision="3" />
          <NavigationProperty Name="AuthToken" Relationship="Model.FK__AuthToken__UsrUser" FromRole="User" ToRole="AuthToken" />
          <NavigationProperty Name="SmsCode" Relationship="Model.FK__AuthSmsCode__UsrUser" FromRole="User" ToRole="SmsCode" />
          <NavigationProperty Name="Transports" Relationship="Model.FK__UsrTransport__UsrUser" FromRole="User" ToRole="Transport" />
          <NavigationProperty Name="TransportDef" Relationship="Model.FK__UsrUser__UsrTransport" FromRole="User" ToRole="Transport" />
          <NavigationProperty Name="UserAvatar" Relationship="Model.FK__UsrUserAvatar__UsrUser" FromRole="User" ToRole="UserAvatar" />
          <NavigationProperty Name="Contacts" Relationship="Model.Contact" FromRole="User" ToRole="User1" />
          <NavigationProperty Name="IncludeToContacts" Relationship="Model.Contact" FromRole="User1" ToRole="User" />
          <NavigationProperty Name="ChildUsers" Relationship="Model.FK__UsrUser__UsrUserOwned" FromRole="User" ToRole="User1" />
          <NavigationProperty Name="OwnerUser" Relationship="Model.FK__UsrUser__UsrUserOwned" FromRole="User1" ToRole="User" />
          <NavigationProperty Name="CausedEvents" Relationship="Model.FK__MsgEvent__UsrUserCaused" FromRole="User" ToRole="Event" />
          <NavigationProperty Name="Events" Relationship="Model.EventAddressee" FromRole="User" ToRole="Event" />
          <NavigationProperty Name="LastDeliveredEvent" Relationship="Model.EventDelivered" FromRole="User" ToRole="Event" />
          <NavigationProperty Name="CreatedGroups" Relationship="Model.FK__UsrGroup__UsrUserOwned" FromRole="User" ToRole="Group" />
          <NavigationProperty Name="Groups" Relationship="Model.FK__UsrGroupList__UsrUser" FromRole="User" ToRole="GroupMember" />
          <Property Name="IsTemporary" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="Segments" Relationship="Model.SegmentMember" FromRole="User" ToRole="Segment" />
          <Property Name="IsBot" Type="Boolean" Nullable="false" />
          <Property Name="RankId" Type="Int32" />
          <NavigationProperty Name="Rank" Relationship="Model.FK__UsrUser__DirRank" FromRole="User" ToRole="Rank" />
          <Property Name="LoBonusScores" Type="Decimal" Precision="12" Scale="2" />
          <Property Name="OlgBonusScores" Type="Decimal" Precision="12" Scale="2" />
          <Property Name="GoBonusScores" Type="Decimal" Precision="12" Scale="2" />
          <NavigationProperty Name="UserSentry" Relationship="Model.FK__UsrUserSentry__UsrUser" FromRole="User" ToRole="UserSentry" />
          <Property Name="LastGetEvents" Type="DateTime" Precision="3" />
          <NavigationProperty Name="Comments" Relationship="Model.FK__UsrComment__UsrUser_1" FromRole="User" ToRole="Comment" />
          <NavigationProperty Name="CommentsOnMe" Relationship="Model.FK__UsrComment__UsrUser_2" FromRole="User" ToRole="Comment" />
          <NavigationProperty Name="AddresseeForUsers" Relationship="Model.MsgAddressee" FromRole="User" ToRole="Transport" />
          <Property Name="FLUserNumber" Type="Int32" />
          <Property Name="ParentFLUserNumber" Type="Int32" />
          <Property Name="Birthday" Type="DateTime" Precision="0" />
          <Property Name="ZipCode" Type="String" MaxLength="20" FixedLength="false" Unicode="true" />
          <Property Name="CityId" Type="Int32" />
          <Property Name="EmailPermission" Type="Boolean" Nullable="false" />
          <Property Name="SmsPermission" Type="Boolean" Nullable="false" />
          <Property Name="IsDirector" Type="Boolean" Nullable="false" />
          <Property Name="LastOrderDate" Type="DateTime" Precision="0" />
          <Property Name="PeriodsWolo" Type="Int32" />
          <Property Name="CashBackBalance" Type="Decimal" Precision="12" Scale="2" />
          <Property Name="FLClubPoints" Type="Decimal" Precision="12" Scale="2" />
          <Property Name="FLClubPointsBurn" Type="Decimal" Precision="12" Scale="2" />
          <NavigationProperty Name="City" Relationship="Model.FK__UsrUser__DirCity" FromRole="User" ToRole="City" />
          <NavigationProperty Name="Files" Relationship="Model.FK__FileFile__UsrUser" FromRole="User" ToRole="FileInfo" />
          <NavigationProperty Name="MessageToSelection" Relationship="Model.FK__MsgMessageToSelection__UsrUser" FromRole="User" ToRole="MessageToSelection" />
          <NavigationProperty Name="BroadcastProhibitionBy" Relationship="Model.BroadcastProhibition" FromRole="User" ToRole="User1" />
          <NavigationProperty Name="BroadcastProhibition" Relationship="Model.BroadcastProhibition" FromRole="User1" ToRole="User" />
          <Property Name="DontDisableOnUpdateStructure" Type="Boolean" Nullable="false" />
          <Property Name="IsUseDeepChilds" Type="Boolean" Nullable="false" />
          <Property Name="LastImportDate" Type="DateTime" Precision="3" />
          <Property Name="ForeignId" Type="String" MaxLength="100" FixedLength="false" Unicode="true" />
          <Property Name="ForeignOwnerId" Type="String" MaxLength="100" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="ScenarioProcess" Relationship="Model.FK__UsrScenarioProcess__UsrUser" FromRole="User" ToRole="ScenarioProcess" />
          <NavigationProperty Name="UserData" Relationship="Model.FK__UsrUserData__UsrUser" FromRole="User" ToRole="UserData" />
          <NavigationProperty Name="MatchedPhonesSender" Relationship="Model.MatchedPhones" FromRole="User" ToRole="User1" />
          <NavigationProperty Name="MatchedPhonesAddr" Relationship="Model.MatchedPhones" FromRole="User1" ToRole="User" />
          <NavigationProperty Name="PersonalProhibitionMain" Relationship="Model.PersonalProhibition" FromRole="User" ToRole="User1" />
          <NavigationProperty Name="PersonalProhibitionSlave" Relationship="Model.PersonalProhibition" FromRole="User1" ToRole="User" />
        </EntityType>
        <EntityType Name="UserAvatar">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="Data" Type="Binary" MaxLength="Max" FixedLength="false" Nullable="false" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrUserAvatar__UsrUser" FromRole="UserAvatar" ToRole="User" />
          <Property Name="MediaTypeId" Type="Int32" Nullable="false" />
          <NavigationProperty Name="MediaType" Relationship="Model.FK__UserAvatar__MediaType_Id" FromRole="UserAvatar" ToRole="MediaType" />
          <Property Name="Width" Type="Int32" Nullable="false" />
          <Property Name="Height" Type="Int32" Nullable="false" />
        </EntityType>
        <Association Name="FK__AuthToken__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.AuthToken" Role="AuthToken" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="AuthToken">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__AuthSmsCode__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.SmsCode" Role="SmsCode" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="SmsCode">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_UsrTransport__CfgTransportType">
          <End Type="Model.TransportType" Role="TransportType" Multiplicity="1" />
          <End Type="Model.Transport" Role="Transport" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Transport">
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrTransport__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.Transport" Role="Transport" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Transport">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUser__UsrTransport">
          <End Type="Model.Transport" Role="Transport" Multiplicity="0..1" />
          <End Type="Model.User" Role="User" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="User">
              <PropertyRef Name="Id" />
              <PropertyRef Name="DefaultTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUserAvatar__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.UserAvatar" Role="UserAvatar" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserAvatar">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="Contact">
          <End Type="Model.User" Role="User" Multiplicity="*" />
          <End Type="Model.User" Role="User1" Multiplicity="*" />
        </Association>
        <Association Name="FK__UsrUser__UsrUserOwned">
          <End Type="Model.User" Role="User" Multiplicity="0..1" />
          <End Type="Model.User" Role="User1" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="User1">
              <PropertyRef Name="OwnerUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="UserDefaultTransportView">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="DefaultTransportTypeId" Type="Int32" />
        </EntityType>
        <EntityType Name="MessageToUser">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="ToUserId" />
            <PropertyRef Name="ToTransportTypeId" />
          </Key>
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="ToUserId" Type="Guid" Nullable="false" />
          <Property Name="ToTransportTypeId" Type="Int32" Nullable="false" />
          <Property Name="IsFailed" Type="Boolean" Nullable="false" />
          <Property Name="IsSent" Type="Boolean" Nullable="false" />
          <Property Name="IsDelivered" Type="Boolean" Nullable="false" />
          <Property Name="IsRead" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="ToTransport" Relationship="Model.FK__MsgMessageToUser__UsrTransport" FromRole="MessageToUser" ToRole="Transport" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMessageToUser__MsgMessage" FromRole="MessageToUser" ToRole="Message" />
          <NavigationProperty Name="MessageError" Relationship="Model.FK__MsgMessageError__MsgMessageToUser" FromRole="MessageToUser" ToRole="MessageError" />
          <NavigationProperty Name="MessageTransportId" Relationship="Model.FK__MsgMessageTransportId__MsgMessageToUser" FromRole="MessageToUser" ToRole="MessageTransportId" />
          <NavigationProperty Name="WebChatDeepLink" Relationship="Model.FK__MsgWebChatDeepLink__MsgMessageToUser" FromRole="MessageToUser" ToRole="WebChatDeepLink" />
          <Property Name="Idx" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="IsWebChatGreeting" Type="Boolean" Nullable="false" />
        </EntityType>
        <Association Name="FK__MsgMessageToUser__UsrTransport">
          <End Type="Model.Transport" Role="Transport" Multiplicity="1" />
          <End Type="Model.MessageToUser" Role="MessageToUser" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="MessageToUser">
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="Event">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Tm" Type="DateTime" Nullable="false" Precision="3" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="EventTypeId" Type="Int32" Nullable="false" />
          <Property Name="CausedByUserId" Type="Guid" Nullable="false" />
          <Property Name="MsgId" Type="Guid" />
          <Property Name="CausedByUserTransportTypeId" Type="Int32" />
          <NavigationProperty Name="EventType" Relationship="Model.FK__MsgEvent__CfgEventType" FromRole="Event" ToRole="EventType" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgEvent__MsgMessage" FromRole="Event" ToRole="Message" />
          <NavigationProperty Name="CausedByUserTransport" Relationship="Model.FK__MsgEvent__UsrTransport" FromRole="Event" ToRole="Transport" />
          <NavigationProperty Name="CausedByUser" Relationship="Model.FK__MsgEvent__UsrUserCaused" FromRole="Event" ToRole="User" />
          <NavigationProperty Name="ToUsers" Relationship="Model.EventAddressee" FromRole="Event" ToRole="User" />
          <NavigationProperty Name="LastDeliveredEvent" Relationship="Model.EventDelivered" FromRole="Event" ToRole="User" />
        </EntityType>
        <EntityType Name="Message">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="PostTm" Type="DateTime" Nullable="false" Precision="3" annotation:StoreGeneratedPattern="Computed" />
          <Property Name="MessageTypeId" Type="Int32" Nullable="false" />
          <Property Name="FromUserId" Type="Guid" Nullable="false" />
          <Property Name="FromTransportTypeId" Type="Int32" Nullable="false" />
          <Property Name="AnswerToId" Type="Guid" />
          <Property Name="Text" Type="String" MaxLength="4000" FixedLength="false" Unicode="true" />
          <Property Name="IsDeleted" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="MessageType" Relationship="Model.FK__MsgMessage__CfgMessageType" FromRole="Message" ToRole="MessageType" />
          <NavigationProperty Name="Event" Relationship="Model.FK__MsgEvent__MsgMessage" FromRole="Message" ToRole="Event" />
          <NavigationProperty Name="Answers" Relationship="Model.FK__MsgMessage__AnswerMessage" FromRole="Message" ToRole="Message1" />
          <NavigationProperty Name="AnswerTo" Relationship="Model.FK__MsgMessage__AnswerMessage" FromRole="Message1" ToRole="Message" />
          <NavigationProperty Name="FromTransport" Relationship="Model.FK__MsgMessage__FromTransport" FromRole="Message" ToRole="Transport" />
          <NavigationProperty Name="ToUsers" Relationship="Model.FK__MsgMessageToUser__MsgMessage" FromRole="Message" ToRole="MessageToUser" />
          <NavigationProperty Name="MessageError" Relationship="Model.FK__MsgMessageError__MsgMessage" FromRole="Message" ToRole="MessageError" />
          <NavigationProperty Name="MessageTransportId" Relationship="Model.FK__MsgMessageTransportId__MsgMessage" FromRole="Message" ToRole="MessageTransportId" />
          <Property Name="Specific" Type="String" MaxLength="500" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="MessageToSegment" Relationship="Model.FK__MsgMessageToSegment__MsgMessage" FromRole="Message" ToRole="MessageToSegment" />
          <Property Name="ForwardMsgId" Type="Guid" />
          <NavigationProperty Name="ForwardByMsg" Relationship="Model.FK__MsgMessage__ForwardMsgId" FromRole="Message" ToRole="Message1" />
          <NavigationProperty Name="ForwardMsg" Relationship="Model.FK__MsgMessage__ForwardMsgId" FromRole="Message1" ToRole="Message" />
          <Property Name="FileId" Type="Guid" />
          <Property Name="Idx" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <NavigationProperty Name="FileInfo" Relationship="Model.FK__MsgMesage__FileInfoFile" FromRole="Message" ToRole="FileInfo" />
          <NavigationProperty Name="MessageToSelection" Relationship="Model.FK__MsgMessageToSelection__MsgMessage" FromRole="Message" ToRole="MessageToSelection" />
          <Property Name="NeedToChangeText" Type="Boolean" Nullable="false" />
          <Property Name="DelayedStart" Type="DateTime" Precision="3" />
          <Property Name="DalayedCancelled" Type="DateTime" Precision="3" />
          <Property Name="ScenarioStepId" Type="Int32" />
          <NavigationProperty Name="ScenarioStep" Relationship="Model.FK__MsgMessage__CfgScenarioStep" FromRole="Message" ToRole="ScenarioStep" />
        </EntityType>
        <Association Name="FK__MsgEvent__CfgEventType">
          <End Type="Model.EventType" Role="EventType" Multiplicity="1" />
          <End Type="Model.Event" Role="Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="EventType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="EventTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__CfgMessageType">
          <End Type="Model.MessageType" Role="MessageType" Multiplicity="1" />
          <End Type="Model.Message" Role="Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="MessageTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEvent__MsgMessage">
          <End Type="Model.Message" Role="Message" Multiplicity="0..1" />
          <End Type="Model.Event" Role="Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEvent__UsrTransport">
          <End Type="Model.Transport" Role="Transport" Multiplicity="0..1" />
          <End Type="Model.Event" Role="Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="CausedByUserId" />
              <PropertyRef Name="CausedByUserTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgEvent__UsrUserCaused">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.Event" Role="Event" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Event">
              <PropertyRef Name="CausedByUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__AnswerMessage">
          <End Type="Model.Message" Role="Message" Multiplicity="0..1" />
          <End Type="Model.Message" Role="Message1" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message1">
              <PropertyRef Name="AnswerToId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__FromTransport">
          <End Type="Model.Transport" Role="Transport" Multiplicity="1" />
          <End Type="Model.Message" Role="Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Transport">
              <PropertyRef Name="UserId" />
              <PropertyRef Name="TransportTypeId" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="FromUserId" />
              <PropertyRef Name="FromTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToUser__MsgMessage">
          <End Type="Model.Message" Role="Message" Multiplicity="1" />
          <End Type="Model.MessageToUser" Role="MessageToUser" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToUser">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="EventAddressee">
          <End Type="Model.Event" Role="Event" Multiplicity="*" />
          <End Type="Model.User" Role="User" Multiplicity="*" />
        </Association>
        <Association Name="EventDelivered">
          <End Type="Model.Event" Role="Event" Multiplicity="0..1" />
          <End Type="Model.User" Role="User" Multiplicity="*" />
        </Association>
        <EntityType Name="MediaType">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Name" Type="String" MaxLength="500" FixedLength="false" Unicode="false" Nullable="false" />
          <Property Name="CanBeAvatar" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="UserAvatar" Relationship="Model.FK__UserAvatar__MediaType_Id" FromRole="MediaType" ToRole="UserAvatar" />
          <Property Name="MediaTypeGroupId" Type="Int32" Nullable="false" />
          <NavigationProperty Name="FileInfo" Relationship="Model.FK__FileFile__CfgMediaType" FromRole="MediaType" ToRole="FileInfo" />
          <Property Name="Enabled" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="MediaTypeGroup" Relationship="Model.FK__MediaTypeId__MediaTypeGroupId" FromRole="MediaType" ToRole="MediaTypeGroup" />
        </EntityType>
        <Association Name="FK__UserAvatar__MediaType_Id">
          <End Type="Model.MediaType" Role="MediaType" Multiplicity="1" />
          <End Type="Model.UserAvatar" Role="UserAvatar" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MediaType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserAvatar">
              <PropertyRef Name="MediaTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="Group">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="IsDeleted" Type="Boolean" Nullable="false" />
          <Property Name="Name" Type="String" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="CreatedByUserId" Type="Guid" Nullable="false" />
          <Property Name="CreatedDate" Type="DateTime" Nullable="false" Precision="3" annotation:StoreGeneratedPattern="Computed" />
          <Property Name="IsEqual" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="CreatedBy" Relationship="Model.FK__UsrGroup__UsrUserOwned" FromRole="Group" ToRole="User" />
          <NavigationProperty Name="Members" Relationship="Model.FK__UsrGroupList__UsrGroup" FromRole="Group" ToRole="GroupMember" />
          <Property Name="DeletedDate" Type="DateTime" Precision="3" />
        </EntityType>
        <EntityType Name="GroupMember">
          <Key>
            <PropertyRef Name="GroupId" />
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="GroupId" Type="Guid" Nullable="false" />
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="IsAdmin" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="Group" Relationship="Model.FK__UsrGroupList__UsrGroup" FromRole="GroupMember" ToRole="Group" />
          <NavigationProperty Name="CreatedBy" Relationship="Model.FK__UsrGroupList__UsrUser" FromRole="GroupMember" ToRole="User" />
        </EntityType>
        <Association Name="FK__UsrGroup__UsrUserOwned">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.Group" Role="Group" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Group">
              <PropertyRef Name="CreatedByUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrGroupList__UsrGroup">
          <End Type="Model.Group" Role="Group" Multiplicity="1" />
          <End Type="Model.GroupMember" Role="GroupMember" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Group">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="GroupMember">
              <PropertyRef Name="GroupId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrGroupList__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.GroupMember" Role="GroupMember" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="GroupMember">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="MessageError">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="InsertedDate" Type="DateTime" Nullable="false" Precision="3" annotation:StoreGeneratedPattern="Computed" />
          <Property Name="MsgId" Type="Guid" />
          <Property Name="ToUserId" Type="Guid" />
          <Property Name="ToTransportTypeId" Type="Int32" />
          <Property Name="Type" Type="String" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="Descr" Type="String" MaxLength="4000" FixedLength="false" Unicode="true" />
          <Property Name="Trace" Type="String" MaxLength="Max" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMessageError__MsgMessage" FromRole="MessageError" ToRole="Message" />
          <NavigationProperty Name="MessageToUser" Relationship="Model.FK__MsgMessageError__MsgMessageToUser" FromRole="MessageError" ToRole="MessageToUser" />
        </EntityType>
        <Association Name="FK__MsgMessageError__MsgMessage">
          <End Type="Model.Message" Role="Message" Multiplicity="0..1" />
          <End Type="Model.MessageError" Role="MessageError" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageError">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageError__MsgMessageToUser">
          <End Type="Model.MessageToUser" Role="MessageToUser" Multiplicity="0..1" />
          <End Type="Model.MessageError" Role="MessageError" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageToUser">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Principal>
            <Dependent Role="MessageError">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="Segment">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="IsDeleted" Type="Boolean" Nullable="false" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="255" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="Members" Relationship="Model.SegmentMember" FromRole="Segment" ToRole="User" />
          <Property Name="Descr" Type="String" Nullable="false" MaxLength="255" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="StructureNodeSegment" Relationship="Model.FK__UiStructureNodeSegment__UsrSegment" FromRole="Segment" ToRole="StructureNodeSegment" />
          <NavigationProperty Name="MessageToSegment" Relationship="Model.FK__MsgMessageToSegment__UsrSegment" FromRole="Segment" ToRole="MessageToSegment" />
          <Property Name="ShowInShortProfile" Type="Boolean" Nullable="false" />
          <Property Name="Tag" Type="String" MaxLength="250" FixedLength="false" Unicode="true" />
          <Property Name="PartnerName" Type="String" MaxLength="100" FixedLength="false" Unicode="true" />
        </EntityType>
        <Association Name="SegmentMember">
          <End Type="Model.Segment" Role="Segment" Multiplicity="*" />
          <End Type="Model.User" Role="User" Multiplicity="*" />
        </Association>
        <EntityType Name="MessageTransportId">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="InsertedDate" Type="DateTime" Nullable="false" Precision="3" annotation:StoreGeneratedPattern="Computed" />
          <Property Name="TransportId" Type="String" Nullable="false" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="ToUserId" Type="Guid" />
          <Property Name="TransportTypeId" Type="Int32" Nullable="false" />
          <NavigationProperty Name="TransportType" Relationship="Model.FK_MsgMessageTransportId__CfgTransportType" FromRole="MessageTransportId" ToRole="TransportType" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMessageTransportId__MsgMessage" FromRole="MessageTransportId" ToRole="Message" />
          <NavigationProperty Name="MessageToUser" Relationship="Model.FK__MsgMessageTransportId__MsgMessageToUser" FromRole="MessageTransportId" ToRole="MessageToUser" />
          <Property Name="Index" Type="Byte" Nullable="false" DefaultValue="0" />
          <Property Name="Count" Type="Byte" Nullable="false" DefaultValue="1" />
        </EntityType>
        <Association Name="FK_MsgMessageTransportId__CfgTransportType">
          <End Type="Model.TransportType" Role="TransportType" Multiplicity="1" />
          <End Type="Model.MessageTransportId" Role="MessageTransportId" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageTransportId">
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageTransportId__MsgMessage">
          <End Type="Model.Message" Role="Message" Multiplicity="1" />
          <End Type="Model.MessageTransportId" Role="MessageTransportId" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageTransportId">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageTransportId__MsgMessageToUser">
          <End Type="Model.MessageToUser" Role="MessageToUser" Multiplicity="0..1" />
          <End Type="Model.MessageTransportId" Role="MessageTransportId" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageToUser">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Principal>
            <Dependent Role="MessageTransportId">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="StructureNodeSegment">
          <Key>
            <PropertyRef Name="NodeId" />
            <PropertyRef Name="SegmentId" />
          </Key>
          <Property Name="NodeId" Type="Guid" Nullable="false" />
          <Property Name="SegmentId" Type="Guid" Nullable="false" />
          <Property Name="Order" Type="Int16" Nullable="false" />
          <Property Name="IsBelongToNode" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="Segment" Relationship="Model.FK__UiStructureNodeSegment__UsrSegment" FromRole="StructureNodeSegment" ToRole="Segment" />
          <NavigationProperty Name="StructureNode" Relationship="Model.FK__UiStructureNodeSegment__UiStructureNode" FromRole="StructureNodeSegment" ToRole="StructureNode" />
        </EntityType>
        <Association Name="FK__UiStructureNodeSegment__UsrSegment">
          <End Type="Model.Segment" Role="Segment" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.StructureNodeSegment" Role="StructureNodeSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Segment">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="StructureNodeSegment">
              <PropertyRef Name="SegmentId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="StructureNode">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="ParentNodeId" Type="Guid" />
          <Property Name="IsShowSegments" Type="Boolean" Nullable="false" />
          <Property Name="IsShowParentUsers" Type="Boolean" Nullable="false" />
          <Property Name="Order" Type="Int16" Nullable="false" />
          <NavigationProperty Name="Childs" Relationship="Model.FK__UiStructureNode__UiStructureNode" FromRole="StructureNode" ToRole="StructureNode1" />
          <NavigationProperty Name="Parent" Relationship="Model.FK__UiStructureNode__UiStructureNode" FromRole="StructureNode1" ToRole="StructureNode" />
          <NavigationProperty Name="NodeSegments" Relationship="Model.FK__UiStructureNodeSegment__UiStructureNode" FromRole="StructureNode" ToRole="StructureNodeSegment" />
        </EntityType>
        <Association Name="FK__UiStructureNode__UiStructureNode">
          <End Type="Model.StructureNode" Role="StructureNode" Multiplicity="0..1" />
          <End Type="Model.StructureNode" Role="StructureNode1" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="StructureNode">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="StructureNode1">
              <PropertyRef Name="ParentNodeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UiStructureNodeSegment__UiStructureNode">
          <End Type="Model.StructureNode" Role="StructureNode" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.StructureNodeSegment" Role="StructureNodeSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="StructureNode">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="StructureNodeSegment">
              <PropertyRef Name="NodeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="MessageToSegment">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="SegmentId" />
          </Key>
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="SegmentId" Type="Guid" Nullable="false" />
          <Property Name="MaxDeep" Type="Int32" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMessageToSegment__MsgMessage" FromRole="MessageToSegment" ToRole="Message" />
          <NavigationProperty Name="Segment" Relationship="Model.FK__MsgMessageToSegment__UsrSegment" FromRole="MessageToSegment" ToRole="Segment" />
          <Property Name="Idx" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
        </EntityType>
        <Association Name="FK__MsgMessageToSegment__MsgMessage">
          <End Type="Model.Message" Role="Message" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.MessageToSegment" Role="MessageToSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSegment">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToSegment__UsrSegment">
          <End Type="Model.Segment" Role="Segment" Multiplicity="1" />
          <End Type="Model.MessageToSegment" Role="MessageToSegment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Segment">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSegment">
              <PropertyRef Name="SegmentId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="Rank">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="250" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrUser__DirRank" FromRole="Rank" ToRole="User" />
        </EntityType>
        <Association Name="FK__UsrUser__DirRank">
          <End Type="Model.Rank" Role="Rank" Multiplicity="0..1" />
          <End Type="Model.User" Role="User" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Rank">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="User">
              <PropertyRef Name="RankId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="UserSentry">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrUserSentry__UsrUser" FromRole="UserSentry" ToRole="User" />
        </EntityType>
        <Association Name="FK__UsrUserSentry__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.UserSentry" Role="UserSentry" Multiplicity="0..1" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserSentry">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="Settings">
          <Key>
            <PropertyRef Name="Name" />
          </Key>
          <Property Name="Name" Type="String" Nullable="false" MaxLength="100" FixedLength="false" Unicode="true" />
          <Property Name="Value" Type="String" MaxLength="Max" FixedLength="false" Unicode="true" />
          <Property Name="Descr" Type="String" MaxLength="500" FixedLength="false" Unicode="true" />
        </EntityType>
        <EntityType Name="WebChatDeepLink">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="ToUserId" Type="Guid" Nullable="false" />
          <Property Name="ToTransportTypeId" Type="Int32" Nullable="false" />
          <Property Name="Link" Type="String" Nullable="false" MaxLength="100" FixedLength="false" Unicode="true" />
          <Property Name="ExpireDate" Type="DateTime" Nullable="false" Precision="3" />
          <NavigationProperty Name="MessageToUser" Relationship="Model.FK__MsgWebChatDeepLink__MsgMessageToUser" FromRole="WebChatDeepLink" ToRole="MessageToUser" />
          <NavigationProperty Name="AcceptedTransportType" Relationship="Model.WebChatAccepted" FromRole="WebChatDeepLink" ToRole="TransportType" />
          <Property Name="SentTo" Type="Int32" />
          <Property Name="ViberStatus" Type="Int32" />
          <Property Name="SmsStatus" Type="Int32" />
          <Property Name="UpdatedTime" Type="DateTime" Precision="3" />
          <Property Name="WebFormRequested" Type="Boolean" Nullable="false" />
          <Property Name="IsFinished" Type="Boolean" Nullable="false" />
          <NavigationProperty Name="SentToTransport" Relationship="Model.FK__MsgWebChatDeepLink__CfgTransportType" FromRole="WebChatDeepLink" ToRole="TransportType" />
        </EntityType>
        <Association Name="FK__MsgMessage__ForwardMsgId">
          <End Type="Model.Message" Role="Message" Multiplicity="0..1" />
          <End Type="Model.Message" Role="Message1" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message1">
              <PropertyRef Name="ForwardMsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgWebChatDeepLink__MsgMessageToUser">
          <End Type="Model.MessageToUser" Role="MessageToUser" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.WebChatDeepLink" Role="WebChatDeepLink" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MessageToUser">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Principal>
            <Dependent Role="WebChatDeepLink">
              <PropertyRef Name="MsgId" />
              <PropertyRef Name="ToUserId" />
              <PropertyRef Name="ToTransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="WebChatAccepted">
          <End Type="Model.TransportType" Role="TransportType" Multiplicity="*" />
          <End Type="Model.WebChatDeepLink" Role="WebChatDeepLink" Multiplicity="*" />
        </Association>
        <EntityType Name="LastMessageView">
          <Key>
            <PropertyRef Name="UserId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="UserOppId" Type="Guid" Nullable="false" />
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="MsgIdx" Type="Int64" Nullable="false" />
          <Property Name="ToTransportTypeId" Type="Int32" Nullable="false" />
          <Property Name="Income" Type="Boolean" />
          <Property Name="MsgToUserIdx" Type="Int64" Nullable="false" />
          <Property Name="UnreadCnt" Type="Int32" />
        </EntityType>
        <EntityType Name="Comment">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="UponUserId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="UponUserId" Type="Guid" Nullable="false" />
          <Property Name="Text" Type="String" Nullable="false" MaxLength="4000" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrComment__UsrUser_1" FromRole="Comment" ToRole="User" />
          <NavigationProperty Name="UponUser" Relationship="Model.FK__UsrComment__UsrUser_2" FromRole="Comment" ToRole="User" />
        </EntityType>
        <Association Name="FK__UsrComment__UsrUser_1">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.Comment" Role="Comment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Comment">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrComment__UsrUser_2">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.Comment" Role="Comment" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Comment">
              <PropertyRef Name="UponUserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <ComplexType Name="User_GetParents_Result">
          <Property Type="Guid" Name="UserId" Nullable="false" />
          <Property Type="Int32" Name="Deep" Nullable="false" />
        </ComplexType>
        <ComplexType Name="User_GetAddresseesForExternalTrans_Result">
          <Property Type="Guid" Name="UserId" Nullable="true" />
          <Property Type="Int32" Name="Order" Nullable="false" />
          <Property Type="Int64" Name="SubOrder" Nullable="true" />
        </ComplexType>
        <Association Name="MsgAddressee">
          <End Type="Model.Transport" Role="Transport" Multiplicity="*" />
          <End Type="Model.User" Role="User" Multiplicity="0..1" />
        </Association>
        <EntityType Name="ExternalTransportButton">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Caption" Type="String" Nullable="false" MaxLength="100" FixedLength="false" Unicode="true" />
          <Property Name="Command" Type="String" Nullable="false" MaxLength="255" FixedLength="false" Unicode="true" />
          <Property Name="Row" Type="Int32" Nullable="false" />
          <Property Name="Col" Type="Int32" Nullable="false" />
          <Property Name="HideForTemporary" Type="Boolean" Nullable="false" />
        </EntityType>
        <EntityType Name="City">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="RegionId" Type="Int32" Nullable="false" />
          <Property Name="Name" Type="String" MaxLength="250" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="Region" Relationship="Model.FK__DirCity__DirRegion" FromRole="City" ToRole="Region" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrUser__DirCity" FromRole="City" ToRole="User" />
        </EntityType>
        <EntityType Name="Country">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="250" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="Region" Relationship="Model.FK__DirRegion__DirCountry" FromRole="Country" ToRole="Region" />
        </EntityType>
        <EntityType Name="Region">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="CountryId" Type="Int32" Nullable="false" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="250" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="City" Relationship="Model.FK__DirCity__DirRegion" FromRole="Region" ToRole="City" />
          <NavigationProperty Name="Country" Relationship="Model.FK__DirRegion__DirCountry" FromRole="Region" ToRole="Country" />
        </EntityType>
        <Association Name="FK__DirCity__DirRegion">
          <End Type="Model.Region" Role="Region" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.City" Role="City" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Region">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="City">
              <PropertyRef Name="RegionId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUser__DirCity">
          <End Type="Model.City" Role="City" Multiplicity="0..1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.User" Role="User" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="City">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="User">
              <PropertyRef Name="CityId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__DirRegion__DirCountry">
          <End Type="Model.Country" Role="Country" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.Region" Role="Region" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Country">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Region">
              <PropertyRef Name="CountryId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="FileInfo">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Guid" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Idx" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="FileOwnerId" Type="Guid" Nullable="false" />
          <Property Name="LoadDate" Type="DateTime" Nullable="false" Precision="3" annotation:StoreGeneratedPattern="Computed" />
          <Property Name="FileName" Type="String" MaxLength="4000" FixedLength="false" Unicode="true" />
          <Property Name="MediaTypeId" Type="Int32" Nullable="false" />
          <Property Name="FileLength" Type="Int32" Nullable="false" />
          <NavigationProperty Name="MediaType" Relationship="Model.FK__FileFile__CfgMediaType" FromRole="FileInfo" ToRole="MediaType" />
          <NavigationProperty Name="User" Relationship="Model.FK__FileFile__UsrUser" FromRole="FileInfo" ToRole="User" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMesage__FileInfoFile" FromRole="FileInfo" ToRole="Message" />
          <Property Name="Width" Type="Int32" />
          <Property Name="Height" Type="Int32" />
        </EntityType>
        <Association Name="FK__FileFile__CfgMediaType">
          <End Type="Model.MediaType" Role="MediaType" Multiplicity="1" />
          <End Type="Model.FileInfo" Role="FileInfo" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MediaType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="FileInfo">
              <PropertyRef Name="MediaTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__FileFile__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.FileInfo" Role="FileInfo" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="FileInfo">
              <PropertyRef Name="FileOwnerId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMesage__FileInfoFile">
          <End Type="Model.FileInfo" Role="FileInfo" Multiplicity="0..1" />
          <End Type="Model.Message" Role="Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="FileInfo">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="FileId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <ComplexType Name="User_GetChilds_Result">
          <Property Type="Guid" Name="UserId" Nullable="false" />
          <Property Type="Int32" Name="Deep" Nullable="false" />
          <Property Type="Guid" Name="OwnerUserId" Nullable="false" />
        </ComplexType>
        <EntityType Name="MediaTypeGroup">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="50" FixedLength="false" Unicode="true" />
          <Property Name="MaxLength" Type="Int32" />
          <NavigationProperty Name="MediaType" Relationship="Model.FK__MediaTypeId__MediaTypeGroupId" FromRole="MediaTypeGroup" ToRole="MediaType" />
        </EntityType>
        <Association Name="FK__MediaTypeId__MediaTypeGroupId">
          <End Type="Model.MediaTypeGroup" Role="MediaTypeGroup" Multiplicity="1" />
          <End Type="Model.MediaType" Role="MediaType" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="MediaTypeGroup">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MediaType">
              <PropertyRef Name="MediaTypeGroupId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="MessageCountOverToday">
          <Key>
            <PropertyRef Name="MessageTypeId" />
            <PropertyRef Name="FromUserId" />
          </Key>
          <Property Name="MessageTypeId" Type="Int32" Nullable="false" />
          <Property Name="FromUserId" Type="Guid" Nullable="false" />
          <Property Name="Count" Type="Int32" />
        </EntityType>
        <EntityType Name="UserMailingTransportView">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="DefaultTransportTypeId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="DefaultTransportTypeId" Type="Int32" Nullable="false" />
        </EntityType>
        <EntityType Name="MessageToSelection">
          <Key>
            <PropertyRef Name="Idx" />
          </Key>
          <Property Name="Idx" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="WithStructure" Type="Boolean" Nullable="false" />
          <Property Name="Include" Type="Boolean" Nullable="false" />
          <Property Name="StructureDeep" Type="Int32" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMessageToSelection__MsgMessage" FromRole="MessageToSelection" ToRole="Message" />
          <NavigationProperty Name="User" Relationship="Model.FK__MsgMessageToSelection__UsrUser" FromRole="MessageToSelection" ToRole="User" />
        </EntityType>
        <Association Name="FK__MsgMessageToSelection__MsgMessage">
          <End Type="Model.Message" Role="Message" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.MessageToSelection" Role="MessageToSelection" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Message">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSelection">
              <PropertyRef Name="MsgId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessageToSelection__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1">
            <OnDelete Action="Cascade" />
          </End>
          <End Type="Model.MessageToSelection" Role="MessageToSelection" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="MessageToSelection">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="BroadcastProhibition">
          <End Type="Model.User" Role="User" Multiplicity="*" />
          <End Type="Model.User" Role="User1" Multiplicity="*" />
        </Association>
        <EntityType Name="MessageStatsGroupedView">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="MessageTypeId" />
            <PropertyRef Name="FromUserId" />
            <PropertyRef Name="MsgIdx" />
          </Key>
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="MessageTypeId" Type="Int32" Nullable="false" />
          <Property Name="FromUserId" Type="Guid" Nullable="false" />
          <Property Name="RecipientCount" Type="Int32" />
          <Property Name="WebChatCount" Type="Int32" />
          <Property Name="FailedCount" Type="Int32" />
          <Property Name="SentCount" Type="Int32" />
          <Property Name="QuequedCount" Type="Int32" />
          <Property Name="WebChatAcceptedCount" Type="Int32" />
          <Property Name="SmsUrlOpenedCount" Type="Int32" />
          <Property Name="MsgIdx" Type="Int64" Nullable="false" />
          <Property Name="CantSendToWebChatCount" Type="Int32" />
        </EntityType>
        <EntityType Name="MessageStatsRowsView">
          <Key>
            <PropertyRef Name="MsgId" />
            <PropertyRef Name="MessageTypeId" />
            <PropertyRef Name="FromUserId" />
            <PropertyRef Name="IsWebChat" />
            <PropertyRef Name="IsFailed" />
            <PropertyRef Name="IsSent" />
            <PropertyRef Name="IsQuequed" />
            <PropertyRef Name="IsWebChatAccepted" />
            <PropertyRef Name="IsSmsUrlOpened" />
            <PropertyRef Name="MsgIdx" />
            <PropertyRef Name="CantSendToWebChat" />
          </Key>
          <Property Name="MsgId" Type="Guid" Nullable="false" />
          <Property Name="MessageTypeId" Type="Int32" Nullable="false" />
          <Property Name="FromUserId" Type="Guid" Nullable="false" />
          <Property Name="ToUserId" Type="Guid" />
          <Property Name="ToTransportTypeId" Type="Int32" />
          <Property Name="IsWebChat" Type="Int32" Nullable="false" />
          <Property Name="IsFailed" Type="Int32" Nullable="false" />
          <Property Name="IsSent" Type="Int32" Nullable="false" />
          <Property Name="IsQuequed" Type="Int32" Nullable="false" />
          <Property Name="IsWebChatAccepted" Type="Int32" Nullable="false" />
          <Property Name="IsSmsUrlOpened" Type="Int32" Nullable="false" />
          <Property Name="MsgIdx" Type="Int64" Nullable="false" />
          <Property Name="CantSendToWebChat" Type="Int32" Nullable="false" />
        </EntityType>
        <Association Name="FK__MsgWebChatDeepLink__CfgTransportType">
          <End Type="Model.TransportType" Role="TransportType" Multiplicity="0..1" />
          <End Type="Model.WebChatDeepLink" Role="WebChatDeepLink" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="WebChatDeepLink">
              <PropertyRef Name="SentTo" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="Scenario">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Name" Type="String" Nullable="false" MaxLength="50" FixedLength="false" Unicode="true" />
          <Property Name="Comment" Type="String" MaxLength="200" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="ScenarioStep" Relationship="Model.FK__CfgScenarioStep__CfgScenario" FromRole="Scenario" ToRole="ScenarioStep" />
        </EntityType>
        <EntityType Name="ScenarioStep">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int32" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="ScenarioId" Type="Int32" Nullable="false" />
          <Property Name="Step" Type="Int32" Nullable="false" />
          <Property Name="Description" Type="String" MaxLength="200" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="Scenario" Relationship="Model.FK__CfgScenarioStep__CfgScenario" FromRole="ScenarioStep" ToRole="Scenario" />
          <NavigationProperty Name="Message" Relationship="Model.FK__MsgMessage__CfgScenarioStep" FromRole="ScenarioStep" ToRole="Message" />
          <NavigationProperty Name="ScenarioProcess" Relationship="Model.FK__UsrScenarioProcess__CfgScenarioStep" FromRole="ScenarioStep" ToRole="ScenarioProcess" />
        </EntityType>
        <Association Name="FK__CfgScenarioStep__CfgScenario">
          <End Type="Model.Scenario" Role="Scenario" Multiplicity="1" />
          <End Type="Model.ScenarioStep" Role="ScenarioStep" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="Scenario">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioStep">
              <PropertyRef Name="ScenarioId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__MsgMessage__CfgScenarioStep">
          <End Type="Model.ScenarioStep" Role="ScenarioStep" Multiplicity="0..1" />
          <End Type="Model.Message" Role="Message" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="ScenarioStep">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="Message">
              <PropertyRef Name="ScenarioStepId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="ScenarioProcess">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="TransportTypeId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="TransportTypeId" Type="Int32" Nullable="false" />
          <Property Name="ScenarioStepId" Type="Int32" Nullable="false" />
          <NavigationProperty Name="ScenarioStep" Relationship="Model.FK__UsrScenarioProcess__CfgScenarioStep" FromRole="ScenarioProcess" ToRole="ScenarioStep" />
          <NavigationProperty Name="TransportType" Relationship="Model.FK_UsrScenarioProcess__CfgTransportType" FromRole="ScenarioProcess" ToRole="TransportType" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrScenarioProcess__UsrUser" FromRole="ScenarioProcess" ToRole="User" />
        </EntityType>
        <Association Name="FK__UsrScenarioProcess__CfgScenarioStep">
          <End Type="Model.ScenarioStep" Role="ScenarioStep" Multiplicity="1" />
          <End Type="Model.ScenarioProcess" Role="ScenarioProcess" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="ScenarioStep">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioProcess">
              <PropertyRef Name="ScenarioStepId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK_UsrScenarioProcess__CfgTransportType">
          <End Type="Model.TransportType" Role="TransportType" Multiplicity="1" />
          <End Type="Model.ScenarioProcess" Role="ScenarioProcess" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="TransportType">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioProcess">
              <PropertyRef Name="TransportTypeId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrScenarioProcess__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.ScenarioProcess" Role="ScenarioProcess" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="ScenarioProcess">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <EntityType Name="UserData">
          <Key>
            <PropertyRef Name="UserId" />
            <PropertyRef Name="KeyId" />
          </Key>
          <Property Name="UserId" Type="Guid" Nullable="false" />
          <Property Name="KeyId" Type="Int64" Nullable="false" />
          <Property Name="Data" Type="String" Nullable="false" MaxLength="Max" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="User" Relationship="Model.FK__UsrUserData__UsrUser" FromRole="UserData" ToRole="User" />
          <NavigationProperty Name="UserDataKey" Relationship="Model.FK__UsrUserData__UsrUserDataKey" FromRole="UserData" ToRole="UserDataKey" />
        </EntityType>
        <EntityType Name="UserDataKey">
          <Key>
            <PropertyRef Name="Id" />
          </Key>
          <Property Name="Id" Type="Int64" Nullable="false" annotation:StoreGeneratedPattern="Identity" />
          <Property Name="Key" Type="String" Nullable="false" MaxLength="255" FixedLength="false" Unicode="true" />
          <NavigationProperty Name="UserData" Relationship="Model.FK__UsrUserData__UsrUserDataKey" FromRole="UserDataKey" ToRole="UserData" />
        </EntityType>
        <Association Name="FK__UsrUserData__UsrUser">
          <End Type="Model.User" Role="User" Multiplicity="1" />
          <End Type="Model.UserData" Role="UserData" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="User">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserData">
              <PropertyRef Name="UserId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="FK__UsrUserData__UsrUserDataKey">
          <End Type="Model.UserDataKey" Role="UserDataKey" Multiplicity="1" />
          <End Type="Model.UserData" Role="UserData" Multiplicity="*" />
          <ReferentialConstraint>
            <Principal Role="UserDataKey">
              <PropertyRef Name="Id" />
            </Principal>
            <Dependent Role="UserData">
              <PropertyRef Name="KeyId" />
            </Dependent>
          </ReferentialConstraint>
        </Association>
        <Association Name="MatchedPhones">
          <End Type="Model.User" Role="User" Multiplicity="*" />
          <End Type="Model.User" Role="User1" Multiplicity="*" />
        </Association>
        <Association Name="PersonalProhibition">
          <End Type="Model.User" Role="User" Multiplicity="*" />
          <End Type="Model.User" Role="User1" Multiplicity="*" />
        </Association>
        </Schema>
    </edmx:ConceptualModels>
    <!-- C-S mapping content -->
    <edmx:Mappings>
      <Mapping Space="C-S" xmlns="http://schemas.microsoft.com/ado/2009/11/mapping/cs">
        <EntityContainerMapping StorageEntityContainer="ModelStoreContainer" CdmEntityContainer="ChatEntities">
          <EntitySetMapping Name="AuthToken">
            <EntityTypeMapping TypeName="Model.AuthToken">
              <MappingFragment StoreEntitySet="AuthToken">
                <ScalarProperty Name="ExpireBy" ColumnName="ExpireBy" />
                <ScalarProperty Name="IssueDate" ColumnName="IssueDate" />
                <ScalarProperty Name="Token" ColumnName="Token" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="SmsCode">
            <EntityTypeMapping TypeName="Model.SmsCode">
              <MappingFragment StoreEntitySet="SmsCode">
                <ScalarProperty Name="ExpireBySec" ColumnName="ExpireBySec" />
                <ScalarProperty Name="IssueDate" ColumnName="IssueDate" />
                <ScalarProperty Name="Code" ColumnName="Code" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="EventType">
            <EntityTypeMapping TypeName="Model.EventType">
              <MappingFragment StoreEntitySet="EventType">
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="MessageType">
            <EntityTypeMapping TypeName="Model.MessageType">
              <MappingFragment StoreEntitySet="MessageType">
                <ScalarProperty Name="LimitForOnce" ColumnName="LimitForOnce" />
                <ScalarProperty Name="LimitForDay" ColumnName="LimitForDay" />
                <ScalarProperty Name="ShowInHistory" ColumnName="ShowInHistory" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="TransportType">
            <EntityTypeMapping TypeName="Model.TransportType">
              <MappingFragment StoreEntitySet="TransportType">
                <ScalarProperty Name="SendGreetingMessage" ColumnName="SendGreetingMessage" />
                <ScalarProperty Name="InnerTransport" ColumnName="InnerTransport" />
                <ScalarProperty Name="DeepLink" ColumnName="DeepLink" />
                <ScalarProperty Name="Prior" ColumnName="Prior" />
                <ScalarProperty Name="CanSelectAsDefault" ColumnName="CanSelectAsDefault" />
                <ScalarProperty Name="VisibleForUser" ColumnName="VisibleForUser" />
                <ScalarProperty Name="Enabled" ColumnName="Enabled" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Transport">
            <EntityTypeMapping TypeName="Model.Transport">
              <MappingFragment StoreEntitySet="Transport">
                <ScalarProperty Name="Enabled" ColumnName="Enabled" />
                <ScalarProperty Name="TransportOuterId" ColumnName="TransportOuterId" />
                <ScalarProperty Name="TransportTypeId" ColumnName="TransportTypeId" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="User">
            <EntityTypeMapping TypeName="Model.User">
              <MappingFragment StoreEntitySet="User">
                <ScalarProperty Name="ForeignOwnerId" ColumnName="ForeignOwnerId" />
                <ScalarProperty Name="ForeignId" ColumnName="ForeignId" />
                <ScalarProperty Name="LastImportDate" ColumnName="LastImportDate" />
                <ScalarProperty Name="IsUseDeepChilds" ColumnName="IsUseDeepChilds" />
                <ScalarProperty Name="DontDisableOnUpdateStructure" ColumnName="DontDisableOnUpdateStructure" />
                <ScalarProperty Name="FLClubPointsBurn" ColumnName="FLClubPointsBurn" />
                <ScalarProperty Name="FLClubPoints" ColumnName="FLClubPoints" />
                <ScalarProperty Name="CashBackBalance" ColumnName="CashBackBalance" />
                <ScalarProperty Name="PeriodsWolo" ColumnName="PeriodsWolo" />
                <ScalarProperty Name="LastOrderDate" ColumnName="LastOrderDate" />
                <ScalarProperty Name="IsDirector" ColumnName="IsDirector" />
                <ScalarProperty Name="SmsPermission" ColumnName="SmsPermission" />
                <ScalarProperty Name="EmailPermission" ColumnName="EmailPermission" />
                <ScalarProperty Name="CityId" ColumnName="CityId" />
                <ScalarProperty Name="ZipCode" ColumnName="ZipCode" />
                <ScalarProperty Name="Birthday" ColumnName="Birthday" />
                <ScalarProperty Name="ParentFLUserNumber" ColumnName="ParentFLUserNumber" />
                <ScalarProperty Name="FLUserNumber" ColumnName="FLUserNumber" />
                <ScalarProperty Name="LastGetEvents" ColumnName="LastGetEvents" />
                <ScalarProperty Name="GoBonusScores" ColumnName="GoBonusScores" />
                <ScalarProperty Name="OlgBonusScores" ColumnName="OlgBonusScores" />
                <ScalarProperty Name="LoBonusScores" ColumnName="LoBonusScores" />
                <ScalarProperty Name="RankId" ColumnName="RankId" />
                <ScalarProperty Name="IsBot" ColumnName="IsBot" />
                <ScalarProperty Name="IsTemporary" ColumnName="IsTemporary" />
                <ScalarProperty Name="AvatarUploadDate" ColumnName="AvatarUploadDate" />
                <ScalarProperty Name="DefaultTransportTypeId" ColumnName="DefaultTransportTypeId" />
                <ScalarProperty Name="OwnerUserId" ColumnName="OwnerUserId" />
                <ScalarProperty Name="PswHash" ColumnName="PswHash" />
                <ScalarProperty Name="Login" ColumnName="Login" />
                <ScalarProperty Name="Email" ColumnName="Email" />
                <ScalarProperty Name="Phone" ColumnName="Phone" />
                <ScalarProperty Name="SignUpDate" ColumnName="SignUpDate" />
                <ScalarProperty Name="InsertDate" ColumnName="InsertDate" />
                <ScalarProperty Name="RegistrationDate" ColumnName="RegistrationDate" />
                <ScalarProperty Name="IsConsultant" ColumnName="IsConsultant" />
                <ScalarProperty Name="FullName" ColumnName="FullName" />
                <ScalarProperty Name="Enabled" ColumnName="Enabled" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="UserAvatar">
            <EntityTypeMapping TypeName="Model.UserAvatar">
              <MappingFragment StoreEntitySet="UserAvatar">
                <ScalarProperty Name="Height" ColumnName="Height" />
                <ScalarProperty Name="Width" ColumnName="Width" />
                <ScalarProperty Name="MediaTypeId" ColumnName="MediaTypeId" />
                <ScalarProperty Name="Data" ColumnName="Data" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <AssociationSetMapping Name="Contact" TypeName="Model.Contact" StoreEntitySet="Contact">
            <EndProperty Name="User1">
              <ScalarProperty Name="Id" ColumnName="ContactId" />
            </EndProperty>
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
          </AssociationSetMapping>
          <EntitySetMapping Name="UserDefaultTransportView">
            <EntityTypeMapping TypeName="Model.UserDefaultTransportView">
              <MappingFragment StoreEntitySet="UserDefaultTransportView">
                <ScalarProperty Name="DefaultTransportTypeId" ColumnName="DefaultTransportTypeId" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="MessageToUser">
            <EntityTypeMapping TypeName="Model.MessageToUser">
              <MappingFragment StoreEntitySet="MessageToUser">
                <ScalarProperty Name="IsWebChatGreeting" ColumnName="IsWebChatGreeting" />
                <ScalarProperty Name="Idx" ColumnName="Idx" />
                <ScalarProperty Name="IsRead" ColumnName="IsRead" />
                <ScalarProperty Name="IsDelivered" ColumnName="IsDelivered" />
                <ScalarProperty Name="IsSent" ColumnName="IsSent" />
                <ScalarProperty Name="IsFailed" ColumnName="IsFailed" />
                <ScalarProperty Name="ToTransportTypeId" ColumnName="ToTransportTypeId" />
                <ScalarProperty Name="ToUserId" ColumnName="ToUserId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Event">
            <EntityTypeMapping TypeName="Model.Event">
              <MappingFragment StoreEntitySet="Event">
                <ScalarProperty Name="CausedByUserTransportTypeId" ColumnName="CausedByUserTransportTypeId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
                <ScalarProperty Name="CausedByUserId" ColumnName="CausedByUserId" />
                <ScalarProperty Name="EventTypeId" ColumnName="EventTypeId" />
                <ScalarProperty Name="Tm" ColumnName="Tm" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Message">
            <EntityTypeMapping TypeName="Model.Message">
              <MappingFragment StoreEntitySet="Message">
                <ScalarProperty Name="ScenarioStepId" ColumnName="ScenarioStepId" />
                <ScalarProperty Name="DalayedCancelled" ColumnName="DalayedCancelled" />
                <ScalarProperty Name="DelayedStart" ColumnName="DelayedStart" />
                <ScalarProperty Name="NeedToChangeText" ColumnName="NeedToChangeText" />
                <ScalarProperty Name="Idx" ColumnName="Idx" />
                <ScalarProperty Name="FileId" ColumnName="FileId" />
                <ScalarProperty Name="ForwardMsgId" ColumnName="ForwardMsgId" />
                <ScalarProperty Name="Specific" ColumnName="Specific" />
                <ScalarProperty Name="IsDeleted" ColumnName="IsDeleted" />
                <ScalarProperty Name="Text" ColumnName="Text" />
                <ScalarProperty Name="AnswerToId" ColumnName="AnswerToId" />
                <ScalarProperty Name="FromTransportTypeId" ColumnName="FromTransportTypeId" />
                <ScalarProperty Name="FromUserId" ColumnName="FromUserId" />
                <ScalarProperty Name="MessageTypeId" ColumnName="MessageTypeId" />
                <ScalarProperty Name="PostTm" ColumnName="PostTm" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <AssociationSetMapping Name="EventAddressee" TypeName="Model.EventAddressee" StoreEntitySet="EventAddressee">
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
            <EndProperty Name="Event">
              <ScalarProperty Name="Id" ColumnName="Id" />
            </EndProperty>
          </AssociationSetMapping>
          <AssociationSetMapping Name="EventDelivered" TypeName="Model.EventDelivered" StoreEntitySet="EventDelivered">
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
            <EndProperty Name="Event">
              <ScalarProperty Name="Id" ColumnName="LastEventId" />
            </EndProperty>
            <Condition ColumnName="LastEventId" IsNull="false" />
          </AssociationSetMapping>
          <EntitySetMapping Name="MediaType">
            <EntityTypeMapping TypeName="Model.MediaType">
              <MappingFragment StoreEntitySet="MediaType">
                <ScalarProperty Name="Enabled" ColumnName="Enabled" />
                <ScalarProperty Name="MediaTypeGroupId" ColumnName="MediaTypeGroupId" />
                <ScalarProperty Name="CanBeAvatar" ColumnName="CanBeAvatar" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <FunctionImportMapping FunctionImportName="SetLastDeliveredEvent" FunctionName="Model.Store.SetLastDeliveredEvent" />
          <EntitySetMapping Name="Group">
            <EntityTypeMapping TypeName="Model.Group">
              <MappingFragment StoreEntitySet="Group">
                <ScalarProperty Name="DeletedDate" ColumnName="DeletedDate" />
                <ScalarProperty Name="IsEqual" ColumnName="IsEqual" />
                <ScalarProperty Name="CreatedDate" ColumnName="CreatedDate" />
                <ScalarProperty Name="CreatedByUserId" ColumnName="CreatedByUserId" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="IsDeleted" ColumnName="IsDeleted" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="GroupMember">
            <EntityTypeMapping TypeName="Model.GroupMember">
              <MappingFragment StoreEntitySet="GroupMember">
                <ScalarProperty Name="IsAdmin" ColumnName="IsAdmin" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
                <ScalarProperty Name="GroupId" ColumnName="GroupId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="MessageError">
            <EntityTypeMapping TypeName="Model.MessageError">
              <MappingFragment StoreEntitySet="MessageError">
                <ScalarProperty Name="Trace" ColumnName="Trace" />
                <ScalarProperty Name="Descr" ColumnName="Descr" />
                <ScalarProperty Name="Type" ColumnName="Type" />
                <ScalarProperty Name="ToTransportTypeId" ColumnName="ToTransportTypeId" />
                <ScalarProperty Name="ToUserId" ColumnName="ToUserId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
                <ScalarProperty Name="InsertedDate" ColumnName="InsertedDate" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Segment">
            <EntityTypeMapping TypeName="Model.Segment">
              <MappingFragment StoreEntitySet="Segment">
                <ScalarProperty Name="PartnerName" ColumnName="PartnerName" />
                <ScalarProperty Name="Tag" ColumnName="Tag" />
                <ScalarProperty Name="ShowInShortProfile" ColumnName="ShowInShortProfile" />
                <ScalarProperty Name="Descr" ColumnName="Descr" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="IsDeleted" ColumnName="IsDeleted" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <AssociationSetMapping Name="SegmentMember" TypeName="Model.SegmentMember" StoreEntitySet="SegmentMember">
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
            <EndProperty Name="Segment">
              <ScalarProperty Name="Id" ColumnName="SegmentId" />
            </EndProperty>
          </AssociationSetMapping>
          <EntitySetMapping Name="MessageTransportId">
            <EntityTypeMapping TypeName="Model.MessageTransportId">
              <MappingFragment StoreEntitySet="MessageTransportId">
                <ScalarProperty Name="Count" ColumnName="Count" />
                <ScalarProperty Name="Index" ColumnName="Index" />
                <ScalarProperty Name="TransportTypeId" ColumnName="TransportTypeId" />
                <ScalarProperty Name="ToUserId" ColumnName="ToUserId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
                <ScalarProperty Name="TransportId" ColumnName="TransportId" />
                <ScalarProperty Name="InsertedDate" ColumnName="InsertedDate" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <FunctionImportMapping FunctionImportName="MergeUsers" FunctionName="Model.Store.MergeUsers" />
          <EntitySetMapping Name="StructureNodeSegment">
            <EntityTypeMapping TypeName="Model.StructureNodeSegment">
              <MappingFragment StoreEntitySet="StructureNodeSegment">
                <ScalarProperty Name="IsBelongToNode" ColumnName="IsBelongToNode" />
                <ScalarProperty Name="Order" ColumnName="Order" />
                <ScalarProperty Name="SegmentId" ColumnName="SegmentId" />
                <ScalarProperty Name="NodeId" ColumnName="NodeId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="StructureNode">
            <EntityTypeMapping TypeName="Model.StructureNode">
              <MappingFragment StoreEntitySet="StructureNode">
                <ScalarProperty Name="Order" ColumnName="Order" />
                <ScalarProperty Name="IsShowParentUsers" ColumnName="IsShowParentUsers" />
                <ScalarProperty Name="IsShowSegments" ColumnName="IsShowSegments" />
                <ScalarProperty Name="ParentNodeId" ColumnName="ParentNodeId" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="MessageToSegment">
            <EntityTypeMapping TypeName="Model.MessageToSegment">
              <MappingFragment StoreEntitySet="MessageToSegment">
                <ScalarProperty Name="Idx" ColumnName="Idx" />
                <ScalarProperty Name="MaxDeep" ColumnName="MaxDeep" />
                <ScalarProperty Name="SegmentId" ColumnName="SegmentId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Rank">
            <EntityTypeMapping TypeName="Model.Rank">
              <MappingFragment StoreEntitySet="Rank">
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="UserSentry">
            <EntityTypeMapping TypeName="Model.UserSentry">
              <MappingFragment StoreEntitySet="UserSentry">
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Settings">
            <EntityTypeMapping TypeName="Model.Settings">
              <MappingFragment StoreEntitySet="Settings">
                <ScalarProperty Name="Descr" ColumnName="Descr" />
                <ScalarProperty Name="Value" ColumnName="Value" />
                <ScalarProperty Name="Name" ColumnName="Name" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="WebChatDeepLink">
            <EntityTypeMapping TypeName="Model.WebChatDeepLink">
              <MappingFragment StoreEntitySet="WebChatDeepLink">
                <ScalarProperty Name="IsFinished" ColumnName="IsFinished" />
                <ScalarProperty Name="WebFormRequested" ColumnName="WebFormRequested" />
                <ScalarProperty Name="UpdatedTime" ColumnName="UpdatedTime" />
                <ScalarProperty Name="SmsStatus" ColumnName="SmsStatus" />
                <ScalarProperty Name="ViberStatus" ColumnName="ViberStatus" />
                <ScalarProperty Name="SentTo" ColumnName="SentTo" />
                <ScalarProperty Name="ExpireDate" ColumnName="ExpireDate" />
                <ScalarProperty Name="Link" ColumnName="Link" />
                <ScalarProperty Name="ToTransportTypeId" ColumnName="ToTransportTypeId" />
                <ScalarProperty Name="ToUserId" ColumnName="ToUserId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <AssociationSetMapping Name="WebChatAccepted" TypeName="Model.WebChatAccepted" StoreEntitySet="WebChatAccepted">
            <EndProperty Name="WebChatDeepLink">
              <ScalarProperty Name="Id" ColumnName="WebChatId" />
            </EndProperty>
            <EndProperty Name="TransportType">
              <ScalarProperty Name="Id" ColumnName="TransportTypeId" />
            </EndProperty>
          </AssociationSetMapping>
          <EntitySetMapping Name="LastMessageView">
            <EntityTypeMapping TypeName="Model.LastMessageView">
              <MappingFragment StoreEntitySet="LastMessageView">
                <ScalarProperty Name="UnreadCnt" ColumnName="UnreadCnt" />
                <ScalarProperty Name="MsgToUserIdx" ColumnName="MsgToUserIdx" />
                <ScalarProperty Name="Income" ColumnName="Income" />
                <ScalarProperty Name="ToTransportTypeId" ColumnName="ToTransportTypeId" />
                <ScalarProperty Name="MsgIdx" ColumnName="MsgIdx" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
                <ScalarProperty Name="UserOppId" ColumnName="UserOppId" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Comment">
            <EntityTypeMapping TypeName="Model.Comment">
              <MappingFragment StoreEntitySet="Comment">
                <ScalarProperty Name="Text" ColumnName="Text" />
                <ScalarProperty Name="UponUserId" ColumnName="UponUserId" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <FunctionImportMapping FunctionImportName="User_GetParents" FunctionName="Model.Store.User_GetParents">
            <ResultMapping>
              <ComplexTypeMapping TypeName="Model.User_GetParents_Result">
                <ScalarProperty Name="UserId" ColumnName="UserId" />
                <ScalarProperty Name="Deep" ColumnName="Deep" />
              </ComplexTypeMapping>
            </ResultMapping>
          </FunctionImportMapping>
          <FunctionImportMapping FunctionImportName="User_GetAddresseesForExternalTrans" FunctionName="Model.Store.User_GetAddresseesForExternalTrans">
            <ResultMapping>
              <ComplexTypeMapping TypeName="Model.User_GetAddresseesForExternalTrans_Result">
                <ScalarProperty Name="UserId" ColumnName="UserId" />
                <ScalarProperty Name="Order" ColumnName="Order" />
                <ScalarProperty Name="SubOrder" ColumnName="SubOrder" />
              </ComplexTypeMapping>
            </ResultMapping>
          </FunctionImportMapping>
          <AssociationSetMapping Name="MsgAddressee" TypeName="Model.MsgAddressee" StoreEntitySet="MsgAddressee">
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="AddrUserId" />
            </EndProperty>
            <EndProperty Name="Transport">
              <ScalarProperty Name="TransportTypeId" ColumnName="TransportTypeId" />
              <ScalarProperty Name="UserId" ColumnName="UserId" />
            </EndProperty>
            <Condition ColumnName="AddrUserId" IsNull="false" />
          </AssociationSetMapping>
          <EntitySetMapping Name="ExternalTransportButton">
            <EntityTypeMapping TypeName="Model.ExternalTransportButton">
              <MappingFragment StoreEntitySet="ExternalTransportButton">
                <ScalarProperty Name="HideForTemporary" ColumnName="HideForTemporary" />
                <ScalarProperty Name="Col" ColumnName="Col" />
                <ScalarProperty Name="Row" ColumnName="Row" />
                <ScalarProperty Name="Command" ColumnName="Command" />
                <ScalarProperty Name="Caption" ColumnName="Caption" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="City">
            <EntityTypeMapping TypeName="Model.City">
              <MappingFragment StoreEntitySet="City">
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="RegionId" ColumnName="RegionId" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Country">
            <EntityTypeMapping TypeName="Model.Country">
              <MappingFragment StoreEntitySet="Country">
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="Region">
            <EntityTypeMapping TypeName="Model.Region">
              <MappingFragment StoreEntitySet="Region">
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="CountryId" ColumnName="CountryId" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="FileInfo">
            <EntityTypeMapping TypeName="Model.FileInfo">
              <MappingFragment StoreEntitySet="FileInfo">
                <ScalarProperty Name="Height" ColumnName="Height" />
                <ScalarProperty Name="Width" ColumnName="Width" />
                <ScalarProperty Name="FileLength" ColumnName="FileLength" />
                <ScalarProperty Name="MediaTypeId" ColumnName="MediaTypeId" />
                <ScalarProperty Name="FileName" ColumnName="FileName" />
                <ScalarProperty Name="LoadDate" ColumnName="LoadDate" />
                <ScalarProperty Name="FileOwnerId" ColumnName="FileOwnerId" />
                <ScalarProperty Name="Idx" ColumnName="Idx" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <FunctionImportMapping FunctionImportName="User_GetChilds" FunctionName="Model.Store.User_GetChilds">
            <ResultMapping>
              <ComplexTypeMapping TypeName="Model.User_GetChilds_Result">
                <ScalarProperty Name="UserId" ColumnName="UserId" />
                <ScalarProperty Name="Deep" ColumnName="Deep" />
              </ComplexTypeMapping>
            </ResultMapping>
          </FunctionImportMapping>
          <EntitySetMapping Name="MediaTypeGroup">
            <EntityTypeMapping TypeName="Model.MediaTypeGroup">
              <MappingFragment StoreEntitySet="MediaTypeGroup">
                <ScalarProperty Name="MaxLength" ColumnName="MaxLength" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="MessageCountOverToday">
            <EntityTypeMapping TypeName="Model.MessageCountOverToday">
              <MappingFragment StoreEntitySet="MessageCountOverToday">
                <ScalarProperty Name="Count" ColumnName="Count" />
                <ScalarProperty Name="FromUserId" ColumnName="FromUserId" />
                <ScalarProperty Name="MessageTypeId" ColumnName="MessageTypeId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="UserMailingTransportView">
            <EntityTypeMapping TypeName="Model.UserMailingTransportView">
              <MappingFragment StoreEntitySet="UserMailingTransportView">
                <ScalarProperty Name="DefaultTransportTypeId" ColumnName="DefaultTransportTypeId" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="MessageToSelection">
            <EntityTypeMapping TypeName="Model.MessageToSelection">
              <MappingFragment StoreEntitySet="MessageToSelection">
                <ScalarProperty Name="StructureDeep" ColumnName="StructureDeep" />
                <ScalarProperty Name="Include" ColumnName="Include" />
                <ScalarProperty Name="WithStructure" ColumnName="WithStructure" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
                <ScalarProperty Name="Idx" ColumnName="Idx" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <AssociationSetMapping Name="BroadcastProhibition" TypeName="Model.BroadcastProhibition" StoreEntitySet="BroadcastProhibition">
            <EndProperty Name="User1">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="ProhibitionUserId" />
            </EndProperty>
          </AssociationSetMapping>
          <FunctionImportMapping FunctionImportName="BroadcastProhibition_Structure" FunctionName="Model.Store.BroadcastProhibition_Structure" />
          <EntitySetMapping Name="MessageStatsGroupedView">
            <EntityTypeMapping TypeName="Model.MessageStatsGroupedView">
              <MappingFragment StoreEntitySet="MessageStatsGroupedView">
                <ScalarProperty Name="CantSendToWebChatCount" ColumnName="CantSendToWebChatCount" />
                <ScalarProperty Name="MsgIdx" ColumnName="MsgIdx" />
                <ScalarProperty Name="SmsUrlOpenedCount" ColumnName="SmsUrlOpenedCount" />
                <ScalarProperty Name="WebChatAcceptedCount" ColumnName="WebChatAcceptedCount" />
                <ScalarProperty Name="QuequedCount" ColumnName="QuequedCount" />
                <ScalarProperty Name="SentCount" ColumnName="SentCount" />
                <ScalarProperty Name="FailedCount" ColumnName="FailedCount" />
                <ScalarProperty Name="WebChatCount" ColumnName="WebChatCount" />
                <ScalarProperty Name="RecipientCount" ColumnName="RecipientCount" />
                <ScalarProperty Name="FromUserId" ColumnName="FromUserId" />
                <ScalarProperty Name="MessageTypeId" ColumnName="MessageTypeId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="MessageStatsRowsView">
            <EntityTypeMapping TypeName="Model.MessageStatsRowsView">
              <MappingFragment StoreEntitySet="MessageStatsRowsView">
                <ScalarProperty Name="CantSendToWebChat" ColumnName="CantSendToWebChat" />
                <ScalarProperty Name="MsgIdx" ColumnName="MsgIdx" />
                <ScalarProperty Name="IsSmsUrlOpened" ColumnName="IsSmsUrlOpened" />
                <ScalarProperty Name="IsWebChatAccepted" ColumnName="IsWebChatAccepted" />
                <ScalarProperty Name="IsQuequed" ColumnName="IsQuequed" />
                <ScalarProperty Name="IsSent" ColumnName="IsSent" />
                <ScalarProperty Name="IsFailed" ColumnName="IsFailed" />
                <ScalarProperty Name="IsWebChat" ColumnName="IsWebChat" />
                <ScalarProperty Name="ToTransportTypeId" ColumnName="ToTransportTypeId" />
                <ScalarProperty Name="ToUserId" ColumnName="ToUserId" />
                <ScalarProperty Name="FromUserId" ColumnName="FromUserId" />
                <ScalarProperty Name="MessageTypeId" ColumnName="MessageTypeId" />
                <ScalarProperty Name="MsgId" ColumnName="MsgId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <FunctionImportMapping FunctionImportName="Update_OwnerUserId_By_ParentFLUserNumber" FunctionName="Model.Store.Update_OwnerUserId_By_ParentFLUserNumber" />
          <FunctionImportMapping FunctionImportName="User_UpdateDeepChilds" FunctionName="Model.Store.User_UpdateDeepChilds" />
          <FunctionImportMapping FunctionImportName="User_DisableNotImportedUsers" FunctionName="Model.Store.User_DisableNotImportedUsers" />
          <EntitySetMapping Name="Scenario">
            <EntityTypeMapping TypeName="Model.Scenario">
              <MappingFragment StoreEntitySet="Scenario">
                <ScalarProperty Name="Comment" ColumnName="Comment" />
                <ScalarProperty Name="Name" ColumnName="Name" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="ScenarioStep">
            <EntityTypeMapping TypeName="Model.ScenarioStep">
              <MappingFragment StoreEntitySet="ScenarioStep">
                <ScalarProperty Name="Description" ColumnName="Description" />
                <ScalarProperty Name="Step" ColumnName="Step" />
                <ScalarProperty Name="ScenarioId" ColumnName="ScenarioId" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="ScenarioProcess">
            <EntityTypeMapping TypeName="Model.ScenarioProcess">
              <MappingFragment StoreEntitySet="ScenarioProcess">
                <ScalarProperty Name="ScenarioStepId" ColumnName="ScenarioStepId" />
                <ScalarProperty Name="TransportTypeId" ColumnName="TransportTypeId" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="UserData">
            <EntityTypeMapping TypeName="Model.UserData">
              <MappingFragment StoreEntitySet="UserData">
                <ScalarProperty Name="Data" ColumnName="Data" />
                <ScalarProperty Name="KeyId" ColumnName="KeyId" />
                <ScalarProperty Name="UserId" ColumnName="UserId" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <EntitySetMapping Name="UserDataKey">
            <EntityTypeMapping TypeName="Model.UserDataKey">
              <MappingFragment StoreEntitySet="UserDataKey">
                <ScalarProperty Name="Key" ColumnName="Key" />
                <ScalarProperty Name="Id" ColumnName="Id" />
              </MappingFragment>
            </EntityTypeMapping>
          </EntitySetMapping>
          <FunctionImportMapping FunctionImportName="DelUserData" FunctionName="Model.Store.DelUserData" />
          <FunctionImportMapping FunctionImportName="SetUserData" FunctionName="Model.Store.SetUserData" />
          <AssociationSetMapping Name="MatchedPhones" TypeName="Model.MatchedPhones" StoreEntitySet="MatchedPhones">
            <EndProperty Name="User1">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="AddrUserId" />
            </EndProperty>
          </AssociationSetMapping>
          <AssociationSetMapping Name="PersonalProhibition" TypeName="Model.PersonalProhibition" StoreEntitySet="PersonalProhibition">
            <EndProperty Name="User1">
              <ScalarProperty Name="Id" ColumnName="UserId" />
            </EndProperty>
            <EndProperty Name="User">
              <ScalarProperty Name="Id" ColumnName="ProhibitionUserId" />
            </EndProperty>
          </AssociationSetMapping>
          </EntityContainerMapping>
      </Mapping>
    </edmx:Mappings>
  </edmx:Runtime>
  <!-- EF Designer content (DO NOT EDIT MANUALLY BELOW HERE) -->
  <Designer xmlns="http://schemas.microsoft.com/ado/2009/11/edmx">
    <Connection>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="MetadataArtifactProcessing" Value="EmbedInOutputAssembly" />
      </DesignerInfoPropertySet>
    </Connection>
    <Options>
      <DesignerInfoPropertySet>
        <DesignerProperty Name="ValidateOnBuild" Value="true" />
        <DesignerProperty Name="EnablePluralization" Value="false" />
        <DesignerProperty Name="IncludeForeignKeysInModel" Value="true" />
        <DesignerProperty Name="UseLegacyProvider" Value="false" />
        <DesignerProperty Name="CodeGenerationStrategy" Value="None" />
      </DesignerInfoPropertySet>
    </Options>
    <!-- Diagram content (shape and connector positions) -->
    <Diagrams></Diagrams>
  </Designer>
</edmx:Edmx>